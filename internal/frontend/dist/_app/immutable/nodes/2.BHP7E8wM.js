import{c as Z,a as n,d as nt,s as j,f as i,t as vt,e as zt}from"../chunks/Csif9Gsu.js";import{i as y,p as Ue,k as a,l as t,s,g as e,t as E,af as D,j as He,y as ie,x as Y,a1 as ut,a as gt,m as o,ag as Ft,ah as Gt}from"../chunks/ianK-5rf.js";import{l as Me,s as Ie,c as ue,i as R,p as Ot}from"../chunks/8p8jlbOJ.js";import{I as je,s as Ee,a as Pe,T as qt,D as xt,G as Oe,r as Le,e as Be,b as ft,c as Ut,d as qe,f as Te,B as Ae,L as Ht,g as Ge,X as tt,h as Jt,i as at,C as Qt,j as Vt,k as Xt,E as Yt}from"../chunks/DXNSMiGO.js";import{D as Kt,a as Wt,b as Zt,c as ea,P as rt,S as mt,d as ta,C as aa,e as ra,t as L}from"../chunks/Ceuy6T28.js";import{G as sa,R as ht,L as st,a as na,C as oa,S as _t,F as la,T as da,B as ia,b as ca,P as va,c as ua}from"../chunks/KsiPXyBe.js";import{g as fa}from"../chunks/CWHco82B.js";import"../chunks/Dm2Ng69d.js";function ma(O,r){const w=Me(r,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"M4.929 4.929 19.07 19.071"}],["circle",{cx:"12",cy:"12",r:"10"}]];je(O,Ie({name:"ban"},()=>w,{get iconNode(){return f},children:(m,u)=>{var h=Z(),p=y(h);Ee(p,r,"default",{}),n(m,h)},$$slots:{default:!0}}))}function bt(O,r){const w=Me(r,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"m9 18 6-6-6-6"}]];je(O,Ie({name:"chevron-right"},()=>w,{get iconNode(){return f},children:(m,u)=>{var h=Z(),p=y(h);Ee(p,r,"default",{}),n(m,h)},$$slots:{default:!0}}))}function _a(O,r){const w=Me(r,["children","$$slots","$$events","$$legacy"]);const f=[["circle",{cx:"12",cy:"12",r:"10"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16"}]];je(O,Ie({name:"circle-alert"},()=>w,{get iconNode(){return f},children:(m,u)=>{var h=Z(),p=y(h);Ee(p,r,"default",{}),n(m,h)},$$slots:{default:!0}}))}function pt(O,r){const w=Me(r,["children","$$slots","$$events","$$legacy"]);const f=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m9 12 2 2 4-4"}]];je(O,Ie({name:"circle-check"},()=>w,{get iconNode(){return f},children:(m,u)=>{var h=Z(),p=y(h);Ee(p,r,"default",{}),n(m,h)},$$slots:{default:!0}}))}function pa(O,r){const w=Me(r,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"M12 4v16"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2"}],["path",{d:"M9 20h6"}]];je(O,Ie({name:"type"},()=>w,{get iconNode(){return f},children:(m,u)=>{var h=Z(),p=y(h);Ee(p,r,"default",{}),n(m,h)},$$slots:{default:!0}}))}var ga=i('<span class="inline-flex items-center gap-1 text-[11px] font-semibold text-green-700 dark:text-green-300 bg-green-500/15 px-2 py-0.5 rounded-full border border-green-500/20 shrink-0"><!> Merged</span>'),xa=i('<span class="inline-flex items-center gap-1 text-[11px] font-semibold text-gray-600 dark:text-gray-300 bg-gray-500/15 px-2 py-0.5 rounded-full border border-gray-500/20 shrink-0"><!> Closed</span>'),ha=i('<span class="text-[10px] text-amber-600 dark:text-amber-400 flex items-center gap-0.5"><!> </span>'),ba=i('<span class="text-[10px] text-red-600 dark:text-red-400 flex items-center gap-0.5"><!></span>'),ka=i('<span class="text-[10px] text-muted-foreground flex items-center gap-0.5" title="Has dependencies"><!> </span>'),ya=i('<span class="text-[10px] text-muted-foreground flex items-center gap-0.5"><!> </span>'),wa=i('<span class="inline-flex items-center gap-0.5 text-[10px] font-medium text-cyan-600 dark:text-cyan-400 bg-cyan-500/10 px-1.5 py-0.5 rounded-full border border-cyan-500/20" title="Branch only â€” no PR created yet"><!> Branch only</span>'),$a=i('<a class="inline-flex items-center gap-1 text-xs text-primary hover:underline mt-2" target="_blank" rel="noopener noreferrer"><!> </a>'),Ca=i('<a class="inline-flex items-center gap-1 text-xs text-primary hover:underline mt-2 max-w-full" target="_blank" rel="noopener noreferrer"><!> <span class="truncate"> </span></a>'),Pa=i('<div class="flex items-start justify-between gap-2"><p class="font-medium text-sm line-clamp-2 flex-1"> </p> <!></div> <div class="flex items-center gap-2 mt-2 flex-wrap"><span class="text-[10px] text-muted-foreground font-mono bg-muted px-1.5 py-0.5 rounded"> </span> <!> <!> <!> <!> <!></div> <!>',1);function Sa(O,r){Ue(r,!0);function w(){fa(`/tasks/${r.task.id}`)}function f(N){N.stopPropagation()}const m=ie(()=>r.task.depends_on&&r.task.depends_on.length>0),u=ie(()=>{if(!r.task.branch_name)return null;const N=Le.repos.find(A=>A.id===r.task.repo_id);return N?`https://github.com/${N.full_name}/tree/${r.task.branch_name}`:null});var h=Z(),p=y(h);ue(p,()=>oa,(N,A)=>{A(N,{class:"group p-3 cursor-pointer bg-[oklch(0.18_0.005_285.823)] shadow-sm hover:bg-accent/50 hover:border-accent transition-all duration-200 hover:shadow-md",onclick:w,role:"button",tabindex:"0",children:(ee,oe)=>{var V=Pa(),J=y(V),se=a(J),fe=a(se,!0);t(se);var z=s(se,2);{var q=c=>{var l=ga(),b=a(l);sa(b,{class:"w-3 h-3"}),D(),t(l),n(c,l)},ce=c=>{var l=Z(),b=y(l);{var H=v=>{var _=xa(),$=a(_);ma($,{class:"w-3 h-3"}),D(),t(_),n(v,_)},te=v=>{bt(v,{class:"w-4 h-4 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0 mt-0.5"})};R(b,v=>{r.task.status==="closed"?v(H):v(te,!1)},!0)}n(c,l)};R(z,c=>{r.task.status==="merged"?c(q):c(ce,!1)})}t(J);var g=s(J,2),T=a(g),X=a(T,!0);t(T);var K=s(T,2);{var ge=c=>{var l=ha(),b=a(l);ht(b,{class:"w-3 h-3"});var H=s(b);t(l),E(()=>{Pe(l,"title",`Retry attempt ${r.task.attempt??""} of ${r.task.max_attempts??""}`),j(H,` #${r.task.attempt??""}`)}),n(c,l)};R(K,c=>{r.task.attempt>1&&c(ge)})}var xe=s(K,2);{var be=c=>{var l=ba(),b=a(l);qt(b,{class:"w-3 h-3"}),t(l),E(()=>Pe(l,"title",`${r.task.consecutive_failures??""} consecutive failures`)),n(c,l)};R(xe,c=>{r.task.consecutive_failures>=2&&c(be)})}var ke=s(xe,2);{var P=c=>{var l=ka(),b=a(l);st(b,{class:"w-3 h-3"});var H=s(b);t(l),E(()=>j(H,` ${r.task.depends_on?.length??""}`)),n(c,l)};R(ke,c=>{e(m)&&c(P)})}var U=s(ke,2);{var W=c=>{var l=ya(),b=a(l);xt(b,{class:"w-3 h-3"});var H=s(b);t(l),E((te,v)=>{Pe(l,"title",`Cost: $${te??""}`),j(H,` ${v??""}`)},[()=>r.task.cost_usd.toFixed(2),()=>r.task.cost_usd.toFixed(2)]),n(c,l)};R(U,c=>{r.task.cost_usd>0&&c(W)})}var ve=s(U,2);{var ye=c=>{var l=wa(),b=a(l);Oe(b,{class:"w-3 h-3"}),D(),t(l),n(c,l)};R(ve,c=>{r.task.branch_name&&!r.task.pull_request_url&&c(ye)})}t(g);var we=s(g,2);{var Se=c=>{var l=$a();l.__click=f;var b=a(l);na(b,{class:"w-3 h-3"});var H=s(b);t(l),E(()=>{Pe(l,"href",r.task.pull_request_url),j(H,` PR #${r.task.pr_number??""}`)}),n(c,l)},$e=c=>{var l=Z(),b=y(l);{var H=te=>{var v=Ca();v.__click=f;var _=a(v);Oe(_,{class:"w-3 h-3 shrink-0"});var $=s(_,2),G=a($,!0);t($),t(v),E(()=>{Pe(v,"href",e(u)??"#"),j(G,r.task.branch_name)}),n(te,v)};R(b,te=>{r.task.branch_name&&te(H)},!0)}n(c,l)};R(we,c=>{r.task.pull_request_url?c(Se):c($e,!1)})}E(()=>{j(fe,r.task.title||r.task.description),j(X,r.task.id)}),n(ee,V)},$$slots:{default:!0}})}),n(O,h),He()}nt(["click"]);var Da=i('<div class="flex flex-col items-center justify-center py-8 text-muted-foreground"><!> <p class="text-sm">No tasks</p></div>'),Ra=i('<div class="rounded-xl border bg-muted/45 flex flex-col overflow-hidden"><div><!> <span> </span> <div class="ml-auto flex items-center gap-1.5"><!> <span class="inline-flex items-center justify-center w-5 h-5 rounded-full bg-background text-xs font-medium"> </span></div></div> <div class="space-y-2 flex-1 overflow-y-auto p-2"><!> <!></div></div>');function Ne(O,r){Ue(r,!0);var w=Ra(),f=a(w),m=a(f);ue(m,()=>r.icon,(z,q)=>{q(z,{get class(){return`w-4 h-4 ${r.iconClass??""}`}})});var u=s(m,2),h=a(u,!0);t(u);var p=s(u,2),N=a(p);{var A=z=>{var q=Z(),ce=y(q);Ut(ce,()=>r.headerAction),n(z,q)};R(N,z=>{r.headerAction&&z(A)})}var ee=s(N,2),oe=a(ee,!0);t(ee),t(p),t(f);var V=s(f,2),J=a(V);Be(J,17,()=>r.tasks,z=>z.id,(z,q)=>{Sa(z,{get task(){return e(q)}})});var se=s(J,2);{var fe=z=>{var q=Da(),ce=a(q);ue(ce,()=>r.icon,(g,T)=>{T(g,{class:"w-8 h-8 opacity-20 mb-2"})}),D(2),t(q),n(z,q)};R(se,z=>{r.tasks.length===0&&z(fe)})}t(V),t(w),E(()=>{ft(f,1,`flex items-center gap-2 px-3 py-2.5 ${r.headerBg??""} border-b`),ft(u,1,`font-medium text-sm ${r.iconClass??""}`),j(h,r.label),j(oe,r.tasks.length)}),n(O,w),He()}var Ta=i('<div class="w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center"><!></div> Create New Task',1),Na=i("<!> <!>",1),Ba=i('<div class="flex items-center gap-2"><span class="text-xs text-muted-foreground font-mono w-5 shrink-0 text-right"></span> <input type="text" class="flex-1 border rounded-lg px-3 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-shadow text-sm" placeholder="e.g., All tests pass"/> <button type="button" class="p-1.5 hover:bg-destructive/10 hover:text-destructive rounded transition-colors shrink-0"><!></button></div>'),La=i('<div class="space-y-2 mb-2"></div>'),Aa=i("<!> Add criterion",1),Ma=i('<span class="font-mono text-xs truncate"> </span> <button type="button" class="ml-1 hover:bg-destructive/20 hover:text-destructive rounded p-0.5 transition-colors shrink-0"><!></button>',1),Ia=i('<div class="flex flex-wrap gap-1.5 mb-3 max-h-20 overflow-y-auto"></div>'),ja=i('<button type="button" class="w-full text-left px-3 py-2.5 hover:bg-accent cursor-pointer border-b last:border-b-0 transition-colors overflow-hidden"><div class="flex items-center gap-2"><span class="font-mono text-xs text-muted-foreground bg-background px-1.5 py-0.5 rounded shrink-0"> </span></div> <div class="text-sm line-clamp-2 mt-1"> </div></button>'),Ea=i('<div class="p-4 text-sm text-muted-foreground text-center"><!> No matching tasks found</div>'),za=i('<div class="p-4 text-sm text-muted-foreground text-center"><!> No tasks available as dependencies</div>'),Fa=i("<option> </option>"),Ga=i('<div class="mt-3 space-y-4 pl-1"><div><label for="model-select" class="text-sm font-medium mb-2 flex items-center gap-2"><!> Model</label> <select id="model-select" class="w-full border rounded-lg p-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-shadow text-sm"></select></div> <div><label for="max-cost" class="text-sm font-medium mb-2 flex items-center gap-2"><!> Max Cost (USD) <span class="text-xs text-muted-foreground font-normal">(optional)</span></label> <input id="max-cost" type="number" step="0.01" min="0" class="w-full border rounded-lg p-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-shadow text-sm" placeholder="e.g., 5.00"/></div> <label for="skip-pr" class="flex items-center gap-3 p-3 rounded-lg border cursor-pointer hover:bg-accent/50 transition-colors"><input id="skip-pr" type="checkbox" class="w-4 h-4 rounded border-input accent-primary"/> <div class="flex-1"><div class="text-sm font-medium flex items-center gap-1.5"><!> Push to branch only</div> <p class="text-xs text-muted-foreground mt-0.5">Skip PR creation. You can create the PR manually and it will be detected on sync.</p></div></label></div>'),Oa=i('<div class="bg-destructive/10 text-destructive text-sm p-3 rounded-lg flex items-center gap-2"><!> </div>'),qa=i("<!> Creating...",1),Ua=i("<!> Create Task",1),Ha=i("<!> <!>",1),Ja=i('<!> <form><div class="py-4 space-y-7"><div class="space-y-3"><div><label for="title" class="text-sm font-medium mb-2 flex items-center gap-2"><!> Title</label> <input id="title" type="text" class="w-full border rounded-lg p-3 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-shadow" placeholder="e.g., Add Fibonacci function with unit tests"/> <p class="text-xs text-muted-foreground mt-1 text-right"> </p></div> <div><label for="description" class="text-sm font-medium mb-2 flex items-center gap-2"><!> Description</label> <textarea id="description" class="w-full border rounded-lg p-3 min-h-[120px] bg-background text-foreground resize-none focus:outline-none focus:ring-2 focus:ring-ring transition-shadow" placeholder="Detailed description of what needs to be done..."></textarea></div></div> <hr class="border-border"/> <div><label class="text-sm font-medium mb-2 flex items-center gap-2"><!> Acceptance Criteria <span class="text-xs text-muted-foreground font-normal">(optional)</span></label> <!> <!></div> <hr class="border-border"/> <div><label for="dep-search" class="text-sm font-medium mb-2 flex items-center gap-2"><!> Dependencies <span class="text-xs text-muted-foreground font-normal">(optional)</span></label> <!> <div class="relative"><!> <input id="dep-search" type="text" class="w-full border rounded-lg pl-9 pr-3 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-shadow" placeholder="Search tasks to add as dependency..." autocomplete="off"/></div> <div class="mt-2 border rounded-lg max-h-36 overflow-y-auto bg-muted/20"><!></div></div> <div><button type="button" class="flex items-center gap-1.5 text-sm text-muted-foreground hover:text-foreground transition-colors"><!> Advanced Options</button> <!></div> <!></div> <!></form>',1);function Qa(O,r){Ue(r,!0);let w=Ot(r,"open",15,!1),f=Y(""),m=Y(""),u=Y(!1),h=Y(null),p=Y(ut([])),N=Y(""),A=Y(ut([])),ee=Y(void 0),oe=Y(!1),V=Y(!1),J=Y(""),se=Y("");gt(()=>{w()&&qe.getDefaultModel().then(P=>{o(se,P.model||"",!0)}).catch(()=>{})});const fe=[{value:"",label:"Default"},{value:"haiku",label:"Haiku"},{value:"sonnet",label:"Sonnet"},{value:"opus",label:"Opus"}],z=ie(()=>e(se)?fe.find(P=>P.value===e(se))?.label||e(se):"not set"),q=ie(()=>L.tasks.filter(P=>!["closed","failed"].includes(P.status)&&!e(p).includes(P.id)&&(e(N)===""||P.id.toLowerCase().includes(e(N).toLowerCase())||P.description.toLowerCase().includes(e(N).toLowerCase()))));async function ce(P){if(P.preventDefault(),!(!e(f).trim()||!e(m).trim())){o(u,!0),o(h,null);try{const U=Le.selectedRepoId;if(!U)throw new Error("No repository selected");const W=e(A).filter(ve=>ve.trim()!=="");await qe.createTaskInRepo(U,e(f),e(m),e(p).length>0?e(p):void 0,W.length>0?W:void 0,e(ee),e(oe)||void 0,e(J)||void 0),o(f,""),o(m,""),o(p,[],!0),o(A,[],!0),o(ee,void 0),o(oe,!1),o(J,""),o(V,!1),w(!1),r.onCreated()}catch(U){o(h,U.message,!0)}finally{o(u,!1)}}}function g(){w(!1),o(f,""),o(m,""),o(p,[],!0),o(A,[],!0),o(ee,void 0),o(oe,!1),o(J,""),o(V,!1),o(h,null),o(N,"")}function T(P){o(p,[...e(p),P],!0),o(N,"")}function X(P){o(p,e(p).filter(U=>U!==P),!0)}function K(){o(A,[...e(A),""],!0)}function ge(P){o(A,e(A).filter((U,W)=>W!==P),!0)}function xe(P,U){o(A,e(A).map((W,ve)=>ve===P?U:W),!0)}var be=Z(),ke=y(be);ue(ke,()=>ra,(P,U)=>{U(P,{get open(){return w()},set open(W){w(W)},children:(W,ve)=>{var ye=Z(),we=y(ye);ue(we,()=>Kt,(Se,$e)=>{$e(Se,{class:"sm:max-w-[750px] max-h-[90vh] overflow-y-auto",children:(c,l)=>{var b=Ja(),H=y(b);ue(H,()=>Wt,(d,C)=>{C(d,{children:(B,M)=>{var I=Na(),k=y(I);ue(k,()=>Zt,(x,Q)=>{Q(x,{class:"flex items-center gap-2",children:(F,ae)=>{var ne=Ta(),he=y(ne),Ce=a(he);_t(Ce,{class:"w-4 h-4 text-primary"}),t(he),D(),n(F,ne)},$$slots:{default:!0}})});var S=s(k,2);ue(S,()=>ea,(x,Q)=>{Q(x,{children:(F,ae)=>{D();var ne=vt("Describe the task you want the AI agent to complete. Be specific for best results.");n(F,ne)},$$slots:{default:!0}})}),n(B,I)},$$slots:{default:!0}})});var te=s(H,2),v=a(te),_=a(v),$=a(_),G=a($),le=a(G);pa(le,{class:"w-4 h-4 text-muted-foreground"}),D(),t(G);var de=s(G,2);Te(de),Ft(de,!0),Pe(de,"maxlength",150);var me=s(de,2),De=a(me);t(me),t($);var ze=s($,2),Je=a(ze),kt=a(Je);la(kt,{class:"w-4 h-4 text-muted-foreground"}),D(),t(Je);var Qe=s(Je,2);Gt(Qe),t(ze),t(_);var Ve=s(_,4),Xe=a(Ve),yt=a(Xe);da(yt,{class:"w-4 h-4 text-muted-foreground"}),D(2),t(Xe);var ot=s(Xe,2);{var wt=d=>{var C=La();Be(C,21,()=>e(A),at,(B,M,I)=>{var k=Ba(),S=a(k);S.textContent=`${I+1}.`;var x=s(S,2);Te(x),x.__input=ae=>xe(I,ae.target.value);var Q=s(x,2);Q.__click=()=>ge(I);var F=a(Q);tt(F,{class:"w-3.5 h-3.5"}),t(Q),t(k),E(()=>{Jt(x,e(M)),x.disabled=e(u)}),n(B,k)}),t(C),n(d,C)};R(ot,d=>{e(A).length>0&&d(wt)})}var $t=s(ot,2);Ae($t,{type:"button",variant:"outline",size:"sm",onclick:K,get disabled(){return e(u)},class:"gap-1.5 text-xs",children:(d,C)=>{var B=Aa(),M=y(B);rt(M,{class:"w-3.5 h-3.5"}),D(),n(d,B)},$$slots:{default:!0}}),t(Ve);var Ye=s(Ve,4),Ke=a(Ye),Ct=a(Ke);st(Ct,{class:"w-4 h-4 text-muted-foreground"}),D(2),t(Ke);var lt=s(Ke,2);{var Pt=d=>{var C=Ia();Be(C,21,()=>e(p),at,(B,M)=>{ia(B,{variant:"secondary",class:"gap-1 pl-2 pr-1 py-1 max-w-48",children:(I,k)=>{var S=Ma(),x=y(S),Q=a(x,!0);t(x);var F=s(x,2);F.__click=()=>X(e(M));var ae=a(F);tt(ae,{class:"w-3 h-3"}),t(F),E(()=>j(Q,e(M))),n(I,S)},$$slots:{default:!0}})}),t(C),n(d,C)};R(lt,d=>{e(p).length>0&&d(Pt)})}var We=s(lt,2),dt=a(We);mt(dt,{class:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"});var Ze=s(dt,2);Te(Ze),t(We);var it=s(We,2),St=a(it);{var Dt=d=>{var C=Z(),B=y(C);Be(B,17,()=>e(q),M=>M.id,(M,I)=>{var k=ja();k.__click=()=>T(e(I).id);var S=a(k),x=a(S),Q=a(x,!0);t(x),t(S);var F=s(S,2),ae=a(F,!0);t(F),t(k),E(()=>{j(Q,e(I).id),j(ae,e(I).title||e(I).description)}),n(M,k)}),n(d,C)},Rt=d=>{var C=Z(),B=y(C);{var M=k=>{var S=Ea(),x=a(S);mt(x,{class:"w-5 h-5 mx-auto mb-2 opacity-40"}),D(),t(S),n(k,S)},I=k=>{var S=za(),x=a(S);st(x,{class:"w-5 h-5 mx-auto mb-2 opacity-40"}),D(),t(S),n(k,S)};R(B,k=>{e(N)?k(M):k(I,!1)},!0)}n(d,C)};R(St,d=>{e(q).length>0?d(Dt):d(Rt,!1)})}t(it),t(Ye);var et=s(Ye,2),Fe=a(et);Fe.__click=()=>o(V,!e(V));var Tt=a(Fe);{var Nt=d=>{Qt(d,{class:"w-4 h-4"})},Bt=d=>{bt(d,{class:"w-4 h-4"})};R(Tt,d=>{e(V)?d(Nt):d(Bt,!1)})}D(),t(Fe);var Lt=s(Fe,2);{var At=d=>{var C=Ga(),B=a(C),M=a(B),I=a(M);aa(I,{class:"w-4 h-4 text-muted-foreground"}),D(),t(M);var k=s(M,2);Be(k,21,()=>fe,at,(re,pe)=>{var Re=Fa(),Et=a(Re);t(Re);var ct={};E(()=>{j(Et,`${e(pe).label??""}${e(pe).value===""?` (${e(z)})`:""}`),ct!==(ct=e(pe).value)&&(Re.value=(Re.__value=e(pe).value)??"")}),n(re,Re)}),t(k),t(B);var S=s(B,2),x=a(S),Q=a(x);xt(Q,{class:"w-4 h-4 text-muted-foreground"}),D(2),t(x);var F=s(x,2);Te(F),t(S);var ae=s(S,2),ne=a(ae);Te(ne);var he=s(ne,2),Ce=a(he),_e=a(Ce);Oe(_e,{class:"w-3.5 h-3.5 text-muted-foreground"}),D(),t(Ce),D(2),t(he),t(ae),t(C),E(()=>{k.disabled=e(u),F.disabled=e(u),ne.disabled=e(u)}),Vt(k,()=>e(J),re=>o(J,re)),Ge(F,()=>e(ee),re=>o(ee,re)),Xt(ne,()=>e(oe),re=>o(oe,re)),n(d,C)};R(Lt,d=>{e(V)&&d(At)})}t(et);var Mt=s(et,2);{var It=d=>{var C=Oa(),B=a(C);tt(B,{class:"w-4 h-4 flex-shrink-0"});var M=s(B);t(C),E(()=>j(M,` ${e(h)??""}`)),n(d,C)};R(Mt,d=>{e(h)&&d(It)})}t(v);var jt=s(v,2);ue(jt,()=>ta,(d,C)=>{C(d,{class:"gap-2",children:(B,M)=>{var I=Ha(),k=y(I);Ae(k,{type:"button",variant:"outline",onclick:g,get disabled(){return e(u)},children:(x,Q)=>{D();var F=vt("Cancel");n(x,F)},$$slots:{default:!0}});var S=s(k,2);{let x=ie(()=>e(u)||!e(f).trim()||!e(m).trim());Ae(S,{type:"submit",get disabled(){return e(x)},class:"gap-2",children:(Q,F)=>{var ae=Z(),ne=y(ae);{var he=_e=>{var re=qa(),pe=y(re);Ht(pe,{class:"w-4 h-4 animate-spin"}),D(),n(_e,re)},Ce=_e=>{var re=Ua(),pe=y(re);_t(pe,{class:"w-4 h-4"}),D(),n(_e,re)};R(ne,_e=>{e(u)?_e(he):_e(Ce,!1)})}n(Q,ae)},$$slots:{default:!0}})}n(B,I)},$$slots:{default:!0}})}),t(te),E(()=>{de.disabled=e(u),j(De,`${e(f).length??""}/150`),Qe.disabled=e(u),Ze.disabled=e(u)}),zt("submit",te,ce),Ge(de,()=>e(f),d=>o(f,d)),Ge(Qe,()=>e(m),d=>o(m,d)),Ge(Ze,()=>e(N),d=>o(N,d)),n(c,b)},$$slots:{default:!0}})}),n(W,ye)},$$slots:{default:!0}})}),n(O,be),He()}nt(["input","click"]);var Va=i('<button class="h-6 px-2 gap-1 text-xs inline-flex items-center rounded-md font-medium bg-amber-500/20 text-amber-200 hover:bg-amber-500/30 transition-colors"><!> New</button>'),Xa=i('<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary/15 text-primary"> </span>'),Ya=i('<div class="flex items-center gap-2"><span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary/15 text-primary"> </span> <!></div>'),Ka=i('<div class="flex items-center gap-2 text-sm text-green-600 dark:text-green-400 bg-green-500/10 px-3 py-1.5 rounded-md"><!> <span> </span></div>'),Wa=i('<!> <span class="hidden sm:inline"> </span>',1),Za=i("<!> New Task",1),er=i('<div class="bg-destructive/10 text-destructive p-4 rounded-lg mb-4 flex items-center gap-3 border border-destructive/20"><!> <span> </span></div>'),tr=i('<header class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 mb-4 sm:mb-6"><div><div class="flex items-center gap-3"><h1 class="text-xl sm:text-2xl font-bold">Dashboard</h1> <!></div> <p class="text-muted-foreground text-sm mt-1 hidden sm:block">Manage and monitor your AI-powered tasks</p></div> <div class="flex items-center gap-3"><!> <!> <!></div></header> <!> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3 sm:gap-4 flex-1 min-h-0 auto-rows-[1fr]"><!> <!> <!> <!> <!></div>',1),ar=i('<div class="flex-1 flex flex-col items-center justify-center text-center"><div class="w-16 h-16 rounded-2xl bg-muted flex items-center justify-center mb-4"><!></div> <h2 class="text-xl font-semibold mb-2">No repository selected</h2> <p class="text-muted-foreground text-sm max-w-md">Add a GitHub repository to get started. Tasks are scoped to individual repositories.</p></div>'),rr=i('<div class="p-4 sm:p-6 flex-1 min-h-0 flex flex-col"><!></div> <!>',1);function ur(O,r){Ue(r,!0);let w=Y(!1),f=Y(!1),m=Y(null),u=null;function h(g){if(u&&(u.close(),u=null),!g){L.setTasks([]),L.loading=!1;return}L.loading=!0;const T=new EventSource(qe.eventsURL(g));T.addEventListener("init",X=>{L.setTasks(JSON.parse(X.data)),L.loading=!1,L.error=null}),T.addEventListener("task_created",X=>{const K=JSON.parse(X.data);L.addTask(K.task)}),T.addEventListener("task_updated",X=>{const K=JSON.parse(X.data);L.updateTask(K.task)}),T.onerror=()=>{L.error="Connection lost. Reconnecting..."},u=T}gt(()=>{const g=Le.selectedRepoId;return h(g),()=>{u&&(u.close(),u=null)}});async function p(){const g=Le.selectedRepoId;if(g){o(f,!0),o(m,null);try{o(m,await qe.syncRepoTasks(g),!0),setTimeout(()=>{o(m,null)},3e3)}catch(T){L.error=T.message}finally{o(f,!1)}}}const N=ie(()=>L.tasks.length),A=ie(()=>L.tasks.filter(g=>["pending","running","review"].includes(g.status)).length),ee=ie(()=>!!Le.selectedRepoId),oe=ie(()=>[...L.tasksByStatus.merged,...L.tasksByStatus.closed]);var V=rr(),J=y(V),se=a(J);{var fe=g=>{const T=v=>{var _=Va();_.__click=()=>o(w,!0);var $=a(_);rt($,{class:"w-3 h-3"}),D(),t(_),n(v,_)};var X=tr(),K=y(X),ge=a(K),xe=a(ge),be=s(a(xe),2);{var ke=v=>{var _=Ya(),$=a(_),G=a($);t($);var le=s($,2);{var de=me=>{var De=Xa(),ze=a(De);t(De),E(()=>j(ze,`${e(A)??""} active`)),n(me,De)};R(le,me=>{e(A)>0&&me(de)})}t(_),E(()=>j(G,`${e(N)??""} total`)),n(v,_)};R(be,v=>{e(N)>0&&v(ke)})}t(xe),D(2),t(ge);var P=s(ge,2),U=a(P);{var W=v=>{var _=Ka(),$=a(_);pt($,{class:"w-4 h-4"});var G=s($,2),le=a(G);t(G),t(_),E(()=>j(le,`Synced ${e(m).synced??""} PRs, ${e(m).merged??""} merged`)),n(v,_)};R(U,v=>{e(m)&&v(W)})}var ve=s(U,2);Ae(ve,{variant:"outline",onclick:p,get disabled(){return e(f)},class:"gap-2",children:(v,_)=>{var $=Wa(),G=y($);{let me=ie(()=>e(f)?"animate-spin":"");ht(G,{get class(){return`w-4 h-4 ${e(me)??""}`}})}var le=s(G,2),de=a(le,!0);t(le),E(()=>j(de,e(f)?"Syncing...":"Sync PRs")),n(v,$)},$$slots:{default:!0}});var ye=s(ve,2);Ae(ye,{onclick:()=>o(w,!0),class:"gap-2",children:(v,_)=>{var $=Za(),G=y($);rt(G,{class:"w-4 h-4"}),D(),n(v,$)},$$slots:{default:!0}}),t(P),t(K);var we=s(K,2);{var Se=v=>{var _=er(),$=a(_);_a($,{class:"w-5 h-5 flex-shrink-0"});var G=s($,2),le=a(G,!0);t(G),t(_),E(()=>j(le,L.error)),n(v,_)};R(we,v=>{L.error&&v(Se)})}var $e=s(we,2),c=a($e);Ne(c,{label:"Pending",get icon(){return ca},headerBg:"bg-amber-500/10",iconClass:"text-amber-600 dark:text-amber-400",get tasks(){return L.tasksByStatus.pending},get headerAction(){return T}});var l=s(c,2);Ne(l,{label:"Running",get icon(){return va},headerBg:"bg-blue-500/10",iconClass:"text-blue-600 dark:text-blue-400",get tasks(){return L.tasksByStatus.running}});var b=s(l,2);Ne(b,{label:"In Review",get icon(){return Yt},headerBg:"bg-purple-500/10",iconClass:"text-purple-600 dark:text-purple-400",get tasks(){return L.tasksByStatus.review}});var H=s(b,2);Ne(H,{label:"Done",get icon(){return pt},headerBg:"bg-green-500/10",iconClass:"text-green-600 dark:text-green-400",get tasks(){return e(oe)}});var te=s(H,2);Ne(te,{label:"Failed",get icon(){return ua},headerBg:"bg-red-500/10",iconClass:"text-red-600 dark:text-red-400",get tasks(){return L.tasksByStatus.failed}}),t($e),n(g,X)},z=g=>{var T=ar(),X=a(T),K=a(X);Oe(K,{class:"w-8 h-8 text-muted-foreground"}),t(X),D(4),t(T),n(g,T)};R(se,g=>{e(ee)?g(fe):g(z,!1)})}t(J);var q=s(J,2);{var ce=g=>{Qa(g,{onCreated:()=>{},get open(){return e(w)},set open(T){o(w,T,!0)}})};R(q,g=>{e(ee)&&g(ce)})}n(O,V),He()}nt(["click"]);export{ur as component};
