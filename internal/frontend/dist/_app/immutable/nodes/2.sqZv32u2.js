import{c as se,a as n,d as ot,s as A,b as _e,f as c,t as ut,e as Gt}from"../chunks/L6jZgFGx.js";import{f as C,p as He,k as a,l as t,s,g as e,t as M,ag as y,j as Je,y as de,x as K,a2 as ft,a as xt,m as d,ah as Ot,ai as qt}from"../chunks/DglTcHX2.js";import{l as Ie,s as je,c as ve,i as D,p as Ut}from"../chunks/DAXCRkFI.js";import{I as Ee,s as ze,a as Pe,T as Ht,D as ht,G as qe,r as Ae,e as Le,b as mt,c as Jt,d as Ue,f as Ne,B as Me,L as Qt,g as Oe,X as at,h as Vt,i as rt,C as Xt,j as Yt,k as Kt,E as Wt}from"../chunks/B0jjtvMw.js";import{D as Zt,a as ea,b as ta,c as aa,P as st,S as pt,d as ra,C as sa,e as na,t as N}from"../chunks/EZYT3Alr.js";import{G as oa,R as bt,L as nt,a as la,C as da,S as gt,F as ia,T as ca,B as va,b as ua,P as fa,c as ma}from"../chunks/BJUNvQ0s.js";import{g as pa}from"../chunks/Dl79D0sp.js";import"../chunks/I-kNSRtr.js";function ga(F,r){const x=Ie(r,["children","$$slots","$$events","$$legacy"]);const u=[["path",{d:"M4.929 4.929 19.07 19.071"}],["circle",{cx:"12",cy:"12",r:"10"}]];Ee(F,je({name:"ban"},()=>x,{get iconNode(){return u},children:(g,v)=>{var _=se(),m=C(_);ze(m,r,"default",{}),n(g,_)},$$slots:{default:!0}}))}function kt(F,r){const x=Ie(r,["children","$$slots","$$events","$$legacy"]);const u=[["path",{d:"m9 18 6-6-6-6"}]];Ee(F,je({name:"chevron-right"},()=>x,{get iconNode(){return u},children:(g,v)=>{var _=se(),m=C(_);ze(m,r,"default",{}),n(g,_)},$$slots:{default:!0}}))}function _a(F,r){const x=Ie(r,["children","$$slots","$$events","$$legacy"]);const u=[["circle",{cx:"12",cy:"12",r:"10"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16"}]];Ee(F,je({name:"circle-alert"},()=>x,{get iconNode(){return u},children:(g,v)=>{var _=se(),m=C(_);ze(m,r,"default",{}),n(g,_)},$$slots:{default:!0}}))}function _t(F,r){const x=Ie(r,["children","$$slots","$$events","$$legacy"]);const u=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m9 12 2 2 4-4"}]];Ee(F,je({name:"circle-check"},()=>x,{get iconNode(){return u},children:(g,v)=>{var _=se(),m=C(_);ze(m,r,"default",{}),n(g,_)},$$slots:{default:!0}}))}function xa(F,r){const x=Ie(r,["children","$$slots","$$events","$$legacy"]);const u=[["path",{d:"M12 4v16"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2"}],["path",{d:"M9 20h6"}]];Ee(F,je({name:"type"},()=>x,{get iconNode(){return u},children:(g,v)=>{var _=se(),m=C(_);ze(m,r,"default",{}),n(g,_)},$$slots:{default:!0}}))}var ha=c('<span class="inline-flex items-center gap-1 text-[11px] font-semibold text-green-700 dark:text-green-300 bg-green-500/15 px-2 py-0.5 rounded-full border border-green-500/20 shrink-0"><!> Merged</span>'),ba=c('<span class="inline-flex items-center gap-1 text-[11px] font-semibold text-gray-600 dark:text-gray-300 bg-gray-500/15 px-2 py-0.5 rounded-full border border-gray-500/20 shrink-0"><!> Closed</span>'),ka=c('<span class="text-[10px] text-amber-600 dark:text-amber-400 flex items-center gap-0.5"><!> </span>'),ya=c('<span class="text-[10px] text-red-600 dark:text-red-400 flex items-center gap-0.5"><!></span>'),wa=c('<span class="text-[10px] text-muted-foreground flex items-center gap-0.5" title="Has dependencies"><!> </span>'),$a=c('<span class="text-[10px] text-muted-foreground flex items-center gap-0.5"><!> </span>'),Ca=c('<span class="inline-flex items-center gap-0.5 text-[10px] font-medium text-cyan-600 dark:text-cyan-400 bg-cyan-500/10 px-1.5 py-0.5 rounded-full border border-cyan-500/20" title="Branch only â€” no PR created yet"><!> Branch only</span>'),Pa=c('<a class="inline-flex items-center gap-1 text-xs text-primary hover:underline mt-2" target="_blank" rel="noopener noreferrer"><!> </a>'),Sa=c('<a class="inline-flex items-center gap-1 text-xs text-primary hover:underline mt-2 max-w-full" target="_blank" rel="noopener noreferrer"><!> <span class="truncate"> </span></a>'),Da=c('<div class="flex items-start justify-between gap-2"><p class="font-medium text-sm line-clamp-2 flex-1"> </p> <!></div> <div class="flex items-center gap-2 mt-2 flex-wrap"><span class="text-[10px] text-muted-foreground font-mono bg-muted px-1.5 py-0.5 rounded"> </span> <!> <!> <!> <!> <!></div> <!>',1);function Ra(F,r){He(r,!0);function x(){pa(`/tasks/${r.task.id}`)}function u(R){R.stopPropagation()}const g=de(()=>r.task.depends_on&&r.task.depends_on.length>0),v=de(()=>{if(!r.task.branch_name)return null;const R=Ae.repos.find(B=>B.id===r.task.repo_id);return R?`https://github.com/${R.full_name}/tree/${r.task.branch_name}`:null});var _=se(),m=C(_);ve(m,()=>da,(R,B)=>{B(R,{class:"group p-3 cursor-pointer bg-[oklch(0.18_0.005_285.823)] shadow-sm hover:bg-accent/50 hover:border-accent transition-all duration-200 hover:shadow-md",onclick:x,role:"button",tabindex:"0",children:(W,ne)=>{var X=Da(),U=C(X),ae=a(U),ue=a(ae,!0);t(ae);var I=s(ae,2);{var G=i=>{var o=ha(),p=a(o);oa(p,{class:"w-3 h-3"}),y(),t(o),n(i,o)},ie=i=>{var o=ba(),p=a(o);ga(p,{class:"w-3 h-3"}),y(),t(o),n(i,o)},h=i=>{kt(i,{class:"w-4 h-4 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0 mt-0.5"})};D(I,i=>{r.task.status==="merged"?i(G):r.task.status==="closed"?i(ie,1):i(h,!1)})}t(U);var P=s(U,2),O=a(P),Z=a(O,!0);t(O);var fe=s(O,2);{var be=i=>{var o=ka(),p=a(o);bt(p,{class:"w-3 h-3"});var J=s(p);t(o),M(()=>{Pe(o,"title",`Retry attempt ${r.task.attempt??""} of ${r.task.max_attempts??""}`),A(J,` #${r.task.attempt??""}`)}),n(i,o)};D(fe,i=>{r.task.attempt>1&&i(be)})}var xe=s(fe,2);{var Se=i=>{var o=ya(),p=a(o);Ht(p,{class:"w-3 h-3"}),t(o),M(()=>Pe(o,"title",`${r.task.consecutive_failures??""} consecutive failures`)),n(i,o)};D(xe,i=>{r.task.consecutive_failures>=2&&i(Se)})}var b=s(xe,2);{var H=i=>{var o=wa(),p=a(o);nt(p,{class:"w-3 h-3"});var J=s(p);t(o),M(()=>A(J,` ${r.task.depends_on?.length??""}`)),n(i,o)};D(b,i=>{e(g)&&i(H)})}var Y=s(b,2);{var ce=i=>{var o=$a(),p=a(o);ht(p,{class:"w-3 h-3"});var J=s(p);t(o),M((k,w)=>{Pe(o,"title",`Cost: $${k??""}`),A(J,` ${w??""}`)},[()=>r.task.cost_usd.toFixed(2),()=>r.task.cost_usd.toFixed(2)]),n(i,o)};D(Y,i=>{r.task.cost_usd>0&&i(ce)})}var ke=s(Y,2);{var ye=i=>{var o=Ca(),p=a(o);qe(p,{class:"w-3 h-3"}),y(),t(o),n(i,o)};D(ke,i=>{r.task.branch_name&&!r.task.pull_request_url&&i(ye)})}t(P);var De=s(P,2);{var we=i=>{var o=Pa(),p=a(o);la(p,{class:"w-3 h-3"});var J=s(p);t(o),M(()=>{Pe(o,"href",r.task.pull_request_url),A(J,` PR #${r.task.pr_number??""}`)}),_e("click",o,u),n(i,o)},$e=i=>{var o=Sa(),p=a(o);qe(p,{class:"w-3 h-3 shrink-0"});var J=s(p,2),k=a(J,!0);t(J),t(o),M(()=>{Pe(o,"href",e(v)??"#"),A(k,r.task.branch_name)}),_e("click",o,u),n(i,o)};D(De,i=>{r.task.pull_request_url?i(we):r.task.branch_name&&i($e,1)})}M(()=>{A(ue,r.task.title||r.task.description),A(Z,r.task.id)}),n(W,X)},$$slots:{default:!0}})}),n(F,_),Je()}ot(["click"]);var Ta=c('<div class="flex flex-col items-center justify-center py-3 sm:py-8 text-muted-foreground"><!> <p class="text-sm">No tasks</p></div>'),Na=c('<div class="rounded-xl border bg-muted/45 flex flex-col overflow-hidden"><div><!> <span> </span> <div class="ml-auto flex items-center gap-1.5"><!> <span class="inline-flex items-center justify-center w-5 h-5 rounded-full bg-background text-xs font-medium"> </span></div></div> <div class="space-y-2 sm:flex-1 overflow-y-auto p-2"><!> <!></div></div>');function Be(F,r){He(r,!0);var x=Na(),u=a(x),g=a(u);ve(g,()=>r.icon,(I,G)=>{G(I,{get class(){return`w-4 h-4 ${r.iconClass??""}`}})});var v=s(g,2),_=a(v,!0);t(v);var m=s(v,2),R=a(m);{var B=I=>{var G=se(),ie=C(G);Jt(ie,()=>r.headerAction),n(I,G)};D(R,I=>{r.headerAction&&I(B)})}var W=s(R,2),ne=a(W,!0);t(W),t(m),t(u);var X=s(u,2),U=a(X);Le(U,17,()=>r.tasks,I=>I.id,(I,G)=>{Ra(I,{get task(){return e(G)}})});var ae=s(U,2);{var ue=I=>{var G=Ta(),ie=a(G);ve(ie,()=>r.icon,(h,P)=>{P(h,{class:"w-8 h-8 opacity-20 mb-2 hidden sm:block"})}),y(2),t(G),n(I,G)};D(ae,I=>{r.tasks.length===0&&I(ue)})}t(X),t(x),M(()=>{mt(u,1,`flex items-center gap-2 px-3 py-2.5 ${r.headerBg??""} border-b`),mt(v,1,`font-medium text-sm ${r.iconClass??""}`),A(_,r.label),A(ne,r.tasks.length)}),n(F,x),Je()}var Ba=c('<div class="w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center"><!></div> Create New Task',1),La=c("<!> <!>",1),Aa=c('<div class="flex items-center gap-2"><span class="text-xs text-muted-foreground font-mono w-5 shrink-0 text-right"></span> <input type="text" class="flex-1 border rounded-lg px-3 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-shadow text-sm" placeholder="e.g., All tests pass"/> <button type="button" class="p-1.5 hover:bg-destructive/10 hover:text-destructive rounded transition-colors shrink-0"><!></button></div>'),Ma=c('<div class="space-y-2 mb-2"></div>'),Ia=c("<!> Add criterion",1),ja=c('<span class="font-mono text-xs truncate"> </span> <button type="button" class="ml-1 hover:bg-destructive/20 hover:text-destructive rounded p-0.5 transition-colors shrink-0"><!></button>',1),Ea=c('<div class="flex flex-wrap gap-1.5 mb-3 max-h-20 overflow-y-auto"></div>'),za=c('<button type="button" class="w-full text-left px-3 py-2.5 hover:bg-accent cursor-pointer border-b last:border-b-0 transition-colors overflow-hidden"><div class="flex items-center gap-2"><span class="font-mono text-xs text-muted-foreground bg-background px-1.5 py-0.5 rounded shrink-0"> </span></div> <div class="text-sm line-clamp-2 mt-1"> </div></button>'),Fa=c('<div class="p-4 text-sm text-muted-foreground text-center"><!> No matching tasks found</div>'),Ga=c('<div class="p-4 text-sm text-muted-foreground text-center"><!> No tasks available as dependencies</div>'),Oa=c("<option> </option>"),qa=c('<div class="mt-3 space-y-4 pl-1"><div><label for="model-select" class="text-sm font-medium mb-2 flex items-center gap-2"><!> Model</label> <select id="model-select" class="w-full border rounded-lg p-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-shadow text-sm"></select></div> <div><label for="max-cost" class="text-sm font-medium mb-2 flex items-center gap-2"><!> Max Cost (USD) <span class="text-xs text-muted-foreground font-normal">(optional)</span></label> <input id="max-cost" type="number" step="0.01" min="0" class="w-full border rounded-lg p-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-shadow text-sm" placeholder="e.g., 5.00"/></div> <label for="skip-pr" class="flex items-center gap-3 p-3 rounded-lg border cursor-pointer hover:bg-accent/50 transition-colors"><input id="skip-pr" type="checkbox" class="w-4 h-4 rounded border-input accent-primary"/> <div class="flex-1"><div class="text-sm font-medium flex items-center gap-1.5"><!> Push to branch only</div> <p class="text-xs text-muted-foreground mt-0.5">Skip PR creation. You can create the PR manually and it will be detected on sync.</p></div></label></div>'),Ua=c('<div class="bg-destructive/10 text-destructive text-sm p-3 rounded-lg flex items-center gap-2"><!> </div>'),Ha=c("<!> Creating...",1),Ja=c("<!> Create Task",1),Qa=c("<!> <!>",1),Va=c('<!> <form><div class="py-4 space-y-7"><div class="space-y-3"><div><label for="title" class="text-sm font-medium mb-2 flex items-center gap-2"><!> Title</label> <input id="title" type="text" class="w-full border rounded-lg p-3 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-shadow" placeholder="e.g., Add Fibonacci function with unit tests"/> <p class="text-xs text-muted-foreground mt-1 text-right"> </p></div> <div><label for="description" class="text-sm font-medium mb-2 flex items-center gap-2"><!> Description <span class="text-xs text-muted-foreground font-normal">(optional)</span></label> <textarea id="description" class="w-full border rounded-lg p-3 min-h-[120px] bg-background text-foreground resize-none focus:outline-none focus:ring-2 focus:ring-ring transition-shadow" placeholder="Detailed description of what needs to be done..."></textarea></div></div> <hr class="border-border"/> <div><label class="text-sm font-medium mb-2 flex items-center gap-2"><!> Acceptance Criteria <span class="text-xs text-muted-foreground font-normal">(optional)</span></label> <!> <!></div> <hr class="border-border"/> <div><label for="dep-search" class="text-sm font-medium mb-2 flex items-center gap-2"><!> Dependencies <span class="text-xs text-muted-foreground font-normal">(optional)</span></label> <!> <div class="relative"><!> <input id="dep-search" type="text" class="w-full border rounded-lg pl-9 pr-3 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-shadow" placeholder="Search tasks to add as dependency..." autocomplete="off"/></div> <div class="mt-2 border rounded-lg max-h-36 overflow-y-auto bg-muted/20"><!></div></div> <div><button type="button" class="flex items-center gap-1.5 text-sm text-muted-foreground hover:text-foreground transition-colors"><!> Advanced Options</button> <!></div> <!></div> <!></form>',1);function Xa(F,r){He(r,!0);let x=Ut(r,"open",15,!1),u=K(""),g=K(""),v=K(!1),_=K(null),m=K(ft([])),R=K(""),B=K(ft([])),W=K(void 0),ne=K(!1),X=K(!1),U=K(""),ae=K("sonnet");xt(()=>{x()&&Ue.getDefaultModel().then(b=>{d(ae,b.model,!0)}).catch(()=>{})});const ue=[{value:"",label:"Default"},{value:"haiku",label:"Haiku"},{value:"sonnet",label:"Sonnet"},{value:"opus",label:"Opus"}],I=de(()=>ue.find(b=>b.value===e(ae))?.label||e(ae)),G=de(()=>N.tasks.filter(b=>!["closed","failed"].includes(b.status)&&!e(m).includes(b.id)&&(e(R)===""||b.id.toLowerCase().includes(e(R).toLowerCase())||b.description.toLowerCase().includes(e(R).toLowerCase()))));async function ie(b){if(b.preventDefault(),!!e(u).trim()){d(v,!0),d(_,null);try{const H=Ae.selectedRepoId;if(!H)throw new Error("No repository selected");const Y=e(B).filter(ce=>ce.trim()!=="");await Ue.createTaskInRepo(H,e(u),e(g),e(m).length>0?e(m):void 0,Y.length>0?Y:void 0,e(W),e(ne)||void 0,e(U)||void 0),d(u,""),d(g,""),d(m,[],!0),d(B,[],!0),d(W,void 0),d(ne,!1),d(U,""),d(X,!1),x(!1),r.onCreated()}catch(H){d(_,H.message,!0)}finally{d(v,!1)}}}function h(){x(!1),d(u,""),d(g,""),d(m,[],!0),d(B,[],!0),d(W,void 0),d(ne,!1),d(U,""),d(X,!1),d(_,null),d(R,"")}function P(b){d(m,[...e(m),b],!0),d(R,"")}function O(b){d(m,e(m).filter(H=>H!==b),!0)}function Z(){d(B,[...e(B),""],!0)}function fe(b){d(B,e(B).filter((H,Y)=>Y!==b),!0)}function be(b,H){d(B,e(B).map((Y,ce)=>ce===b?H:Y),!0)}var xe=se(),Se=C(xe);ve(Se,()=>na,(b,H)=>{H(b,{get open(){return x()},set open(Y){x(Y)},children:(Y,ce)=>{var ke=se(),ye=C(ke);ve(ye,()=>Zt,(De,we)=>{we(De,{class:"sm:max-w-[750px] max-h-[90vh] overflow-y-auto",children:($e,i)=>{var o=Va(),p=C(o);ve(p,()=>ea,(l,f)=>{f(l,{children:(S,E)=>{var z=La(),L=C(z);ve(L,()=>ta,($,V)=>{V($,{class:"flex items-center gap-2",children:(j,ee)=>{var re=Ba(),he=C(re),Ce=a(he);gt(Ce,{class:"w-4 h-4 text-primary"}),t(he),y(),n(j,re)},$$slots:{default:!0}})});var q=s(L,2);ve(q,()=>aa,($,V)=>{V($,{children:(j,ee)=>{y();var re=ut("Describe the task you want the AI agent to complete. Be specific for best results.");n(j,re)},$$slots:{default:!0}})}),n(S,z)},$$slots:{default:!0}})});var J=s(p,2),k=a(J),w=a(k),T=a(w),Q=a(T),oe=a(Q);xa(oe,{class:"w-4 h-4 text-muted-foreground"}),y(),t(Q);var le=s(Q,2);Ne(le),Ot(le,!0),Pe(le,"maxlength",150);var me=s(le,2),Re=a(me);t(me),t(T);var Fe=s(T,2),Qe=a(Fe),yt=a(Qe);ia(yt,{class:"w-4 h-4 text-muted-foreground"}),y(2),t(Qe);var Ve=s(Qe,2);qt(Ve),t(Fe),t(w);var Xe=s(w,4),Ye=a(Xe),wt=a(Ye);ca(wt,{class:"w-4 h-4 text-muted-foreground"}),y(2),t(Ye);var lt=s(Ye,2);{var $t=l=>{var f=Ma();Le(f,21,()=>e(B),rt,(S,E,z)=>{var L=Aa(),q=a(L);q.textContent=`${z+1}.`;var $=s(q,2);Ne($);var V=s($,2),j=a(V);at(j,{class:"w-3.5 h-3.5"}),t(V),t(L),M(()=>{Vt($,e(E)),$.disabled=e(v)}),_e("input",$,ee=>be(z,ee.target.value)),_e("click",V,()=>fe(z)),n(S,L)}),t(f),n(l,f)};D(lt,l=>{e(B).length>0&&l($t)})}var Ct=s(lt,2);Me(Ct,{type:"button",variant:"outline",size:"sm",onclick:Z,get disabled(){return e(v)},class:"gap-1.5 text-xs",children:(l,f)=>{var S=Ia(),E=C(S);st(E,{class:"w-3.5 h-3.5"}),y(),n(l,S)},$$slots:{default:!0}}),t(Xe);var Ke=s(Xe,4),We=a(Ke),Pt=a(We);nt(Pt,{class:"w-4 h-4 text-muted-foreground"}),y(2),t(We);var dt=s(We,2);{var St=l=>{var f=Ea();Le(f,21,()=>e(m),rt,(S,E)=>{va(S,{variant:"secondary",class:"gap-1 pl-2 pr-1 py-1 max-w-48",children:(z,L)=>{var q=ja(),$=C(q),V=a($,!0);t($);var j=s($,2),ee=a(j);at(ee,{class:"w-3 h-3"}),t(j),M(()=>A(V,e(E))),_e("click",j,()=>O(e(E))),n(z,q)},$$slots:{default:!0}})}),t(f),n(l,f)};D(dt,l=>{e(m).length>0&&l(St)})}var Ze=s(dt,2),it=a(Ze);pt(it,{class:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"});var et=s(it,2);Ne(et),t(Ze);var ct=s(Ze,2),Dt=a(ct);{var Rt=l=>{var f=se(),S=C(f);Le(S,17,()=>e(G),E=>E.id,(E,z)=>{var L=za(),q=a(L),$=a(q),V=a($,!0);t($),t(q);var j=s(q,2),ee=a(j,!0);t(j),t(L),M(()=>{A(V,e(z).id),A(ee,e(z).title||e(z).description)}),_e("click",L,()=>P(e(z).id)),n(E,L)}),n(l,f)},Tt=l=>{var f=Fa(),S=a(f);pt(S,{class:"w-5 h-5 mx-auto mb-2 opacity-40"}),y(),t(f),n(l,f)},Nt=l=>{var f=Ga(),S=a(f);nt(S,{class:"w-5 h-5 mx-auto mb-2 opacity-40"}),y(),t(f),n(l,f)};D(Dt,l=>{e(G).length>0?l(Rt):e(R)?l(Tt,1):l(Nt,!1)})}t(ct),t(Ke);var tt=s(Ke,2),Ge=a(tt),Bt=a(Ge);{var Lt=l=>{Xt(l,{class:"w-4 h-4"})},At=l=>{kt(l,{class:"w-4 h-4"})};D(Bt,l=>{e(X)?l(Lt):l(At,!1)})}y(),t(Ge);var Mt=s(Ge,2);{var It=l=>{var f=qa(),S=a(f),E=a(S),z=a(E);sa(z,{class:"w-4 h-4 text-muted-foreground"}),y(),t(E);var L=s(E,2);Le(L,21,()=>ue,rt,(te,ge)=>{var Te=Oa(),Ft=a(Te);t(Te);var vt={};M(()=>{A(Ft,`${e(ge).label??""}${e(ge).value===""?` (${e(I)})`:""}`),vt!==(vt=e(ge).value)&&(Te.value=(Te.__value=e(ge).value)??"")}),n(te,Te)}),t(L),t(S);var q=s(S,2),$=a(q),V=a($);ht(V,{class:"w-4 h-4 text-muted-foreground"}),y(2),t($);var j=s($,2);Ne(j),t(q);var ee=s(q,2),re=a(ee);Ne(re);var he=s(re,2),Ce=a(he),pe=a(Ce);qe(pe,{class:"w-3.5 h-3.5 text-muted-foreground"}),y(),t(Ce),y(2),t(he),t(ee),t(f),M(()=>{L.disabled=e(v),j.disabled=e(v),re.disabled=e(v)}),Yt(L,()=>e(U),te=>d(U,te)),Oe(j,()=>e(W),te=>d(W,te)),Kt(re,()=>e(ne),te=>d(ne,te)),n(l,f)};D(Mt,l=>{e(X)&&l(It)})}t(tt);var jt=s(tt,2);{var Et=l=>{var f=Ua(),S=a(f);at(S,{class:"w-4 h-4 flex-shrink-0"});var E=s(S);t(f),M(()=>A(E,` ${e(_)??""}`)),n(l,f)};D(jt,l=>{e(_)&&l(Et)})}t(k);var zt=s(k,2);ve(zt,()=>ra,(l,f)=>{f(l,{class:"gap-2",children:(S,E)=>{var z=Qa(),L=C(z);Me(L,{type:"button",variant:"outline",onclick:h,get disabled(){return e(v)},children:($,V)=>{y();var j=ut("Cancel");n($,j)},$$slots:{default:!0}});var q=s(L,2);{let $=de(()=>e(v)||!e(u).trim());Me(q,{type:"submit",get disabled(){return e($)},class:"gap-2",children:(V,j)=>{var ee=se(),re=C(ee);{var he=pe=>{var te=Ha(),ge=C(te);Qt(ge,{class:"w-4 h-4 animate-spin"}),y(),n(pe,te)},Ce=pe=>{var te=Ja(),ge=C(te);gt(ge,{class:"w-4 h-4"}),y(),n(pe,te)};D(re,pe=>{e(v)?pe(he):pe(Ce,!1)})}n(V,ee)},$$slots:{default:!0}})}n(S,z)},$$slots:{default:!0}})}),t(J),M(()=>{le.disabled=e(v),A(Re,`${e(u).length??""}/150`),Ve.disabled=e(v),et.disabled=e(v)}),Gt("submit",J,ie),Oe(le,()=>e(u),l=>d(u,l)),Oe(Ve,()=>e(g),l=>d(g,l)),Oe(et,()=>e(R),l=>d(R,l)),_e("click",Ge,()=>d(X,!e(X))),n($e,o)},$$slots:{default:!0}})}),n(Y,ke)},$$slots:{default:!0}})}),n(F,xe),Je()}ot(["input","click"]);var Ya=c('<button class="h-6 px-2 gap-1 text-xs inline-flex items-center rounded-md font-medium bg-amber-500/20 text-amber-200 hover:bg-amber-500/30 transition-colors"><!> New</button>'),Ka=c('<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary/15 text-primary"> </span>'),Wa=c('<div class="flex items-center gap-2"><span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary/15 text-primary"> </span> <!></div>'),Za=c('<div class="flex items-center gap-2 text-sm text-green-600 dark:text-green-400 bg-green-500/10 px-3 py-1.5 rounded-md"><!> <span> </span></div>'),er=c('<!> <span class="hidden sm:inline"> </span>',1),tr=c("<!> New Task",1),ar=c('<div class="bg-destructive/10 text-destructive p-4 rounded-lg mb-4 flex items-center gap-3 border border-destructive/20"><!> <span> </span></div>'),rr=c('<header class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 mb-4 sm:mb-6"><div><div class="flex items-center gap-3"><h1 class="text-xl sm:text-2xl font-bold">Dashboard</h1> <!></div> <p class="text-muted-foreground text-sm mt-1 hidden sm:block">Manage and monitor your AI-powered tasks</p></div> <div class="flex items-center gap-3"><!> <!> <!></div></header> <!> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3 sm:gap-4 flex-1 min-h-0 sm:auto-rows-[1fr]"><!> <!> <!> <!> <!></div>',1),sr=c('<div class="flex-1 flex flex-col items-center justify-center text-center"><div class="w-16 h-16 rounded-2xl bg-muted flex items-center justify-center mb-4"><!></div> <h2 class="text-xl font-semibold mb-2">No repository selected</h2> <p class="text-muted-foreground text-sm max-w-md">Add a GitHub repository to get started. Tasks are scoped to individual repositories.</p></div>'),nr=c('<div class="p-4 sm:p-6 flex-1 min-h-0 flex flex-col"><!></div> <!>',1);function mr(F,r){He(r,!0);let x=K(!1),u=K(!1),g=K(null),v=null;function _(h){if(v&&(v.close(),v=null),!h){N.setTasks([]),N.loading=!1;return}N.loading=!0;const P=new EventSource(Ue.eventsURL(h));P.addEventListener("init",O=>{N.setTasks(JSON.parse(O.data)),N.loading=!1,N.error=null}),P.addEventListener("task_created",O=>{const Z=JSON.parse(O.data);N.addTask(Z.task)}),P.addEventListener("task_updated",O=>{const Z=JSON.parse(O.data);N.updateTask(Z.task)}),P.onerror=()=>{N.error="Connection lost. Reconnecting..."},v=P}xt(()=>{const h=Ae.selectedRepoId;return _(h),()=>{v&&(v.close(),v=null)}});async function m(){const h=Ae.selectedRepoId;if(h){d(u,!0),d(g,null);try{d(g,await Ue.syncRepoTasks(h),!0),setTimeout(()=>{d(g,null)},3e3)}catch(P){N.error=P.message}finally{d(u,!1)}}}const R=de(()=>N.tasks.length),B=de(()=>N.tasks.filter(h=>["pending","running","review"].includes(h.status)).length),W=de(()=>!!Ae.selectedRepoId),ne=de(()=>[...N.tasksByStatus.merged,...N.tasksByStatus.closed]);var X=nr(),U=C(X),ae=a(U);{var ue=h=>{const P=k=>{var w=Ya(),T=a(w);st(T,{class:"w-3 h-3"}),y(),t(w),_e("click",w,()=>d(x,!0)),n(k,w)};var O=rr(),Z=C(O),fe=a(Z),be=a(fe),xe=s(a(be),2);{var Se=k=>{var w=Wa(),T=a(w),Q=a(T);t(T);var oe=s(T,2);{var le=me=>{var Re=Ka(),Fe=a(Re);t(Re),M(()=>A(Fe,`${e(B)??""} active`)),n(me,Re)};D(oe,me=>{e(B)>0&&me(le)})}t(w),M(()=>A(Q,`${e(R)??""} total`)),n(k,w)};D(xe,k=>{e(R)>0&&k(Se)})}t(be),y(2),t(fe);var b=s(fe,2),H=a(b);{var Y=k=>{var w=Za(),T=a(w);_t(T,{class:"w-4 h-4"});var Q=s(T,2),oe=a(Q);t(Q),t(w),M(()=>A(oe,`Synced ${e(g).synced??""} PRs, ${e(g).merged??""} merged`)),n(k,w)};D(H,k=>{e(g)&&k(Y)})}var ce=s(H,2);Me(ce,{variant:"outline",onclick:m,get disabled(){return e(u)},class:"gap-2",children:(k,w)=>{var T=er(),Q=C(T);{let me=de(()=>e(u)?"animate-spin":"");bt(Q,{get class(){return`w-4 h-4 ${e(me)??""}`}})}var oe=s(Q,2),le=a(oe,!0);t(oe),M(()=>A(le,e(u)?"Syncing...":"Sync PRs")),n(k,T)},$$slots:{default:!0}});var ke=s(ce,2);Me(ke,{onclick:()=>d(x,!0),class:"gap-2",children:(k,w)=>{var T=tr(),Q=C(T);st(Q,{class:"w-4 h-4"}),y(),n(k,T)},$$slots:{default:!0}}),t(b),t(Z);var ye=s(Z,2);{var De=k=>{var w=ar(),T=a(w);_a(T,{class:"w-5 h-5 flex-shrink-0"});var Q=s(T,2),oe=a(Q,!0);t(Q),t(w),M(()=>A(oe,N.error)),n(k,w)};D(ye,k=>{N.error&&k(De)})}var we=s(ye,2),$e=a(we);Be($e,{label:"Pending",get icon(){return ua},headerBg:"bg-amber-500/10",iconClass:"text-amber-600 dark:text-amber-400",get tasks(){return N.tasksByStatus.pending},get headerAction(){return P}});var i=s($e,2);Be(i,{label:"Running",get icon(){return fa},headerBg:"bg-blue-500/10",iconClass:"text-blue-600 dark:text-blue-400",get tasks(){return N.tasksByStatus.running}});var o=s(i,2);Be(o,{label:"In Review",get icon(){return Wt},headerBg:"bg-purple-500/10",iconClass:"text-purple-600 dark:text-purple-400",get tasks(){return N.tasksByStatus.review}});var p=s(o,2);Be(p,{label:"Done",get icon(){return _t},headerBg:"bg-green-500/10",iconClass:"text-green-600 dark:text-green-400",get tasks(){return e(ne)}});var J=s(p,2);Be(J,{label:"Failed",get icon(){return ma},headerBg:"bg-red-500/10",iconClass:"text-red-600 dark:text-red-400",get tasks(){return N.tasksByStatus.failed}}),t(we),n(h,O)},I=h=>{var P=sr(),O=a(P),Z=a(O);qe(Z,{class:"w-8 h-8 text-muted-foreground"}),t(O),y(4),t(P),n(h,P)};D(ae,h=>{e(W)?h(ue):h(I,!1)})}t(U);var G=s(U,2);{var ie=h=>{Xa(h,{onCreated:()=>{},get open(){return e(x)},set open(P){d(x,P,!0)}})};D(G,h=>{e(W)&&h(ie)})}n(F,X),Je()}ot(["click"]);export{mr as component};
