import{c as Y,a as n,d as Ze,s as L,f as v,t as Je,e as pt}from"../chunks/_1hIveIM.js";import{i as x,x as Q,a3 as et,g as t,m as d,p as Ne,k as r,l as a,s,t as I,af as B,j as Ae,y as ne,ag as He,ah as mt,a as _t}from"../chunks/D1CvOZpc.js";import{l as Me,s as Ge,c as se,i as k,p as xt}from"../chunks/B_d95KGX.js";import{I as qe,s as Oe,a as Pe,b as ht,e as je,c as Qe,d as bt,r as Xe,B as Be,L as kt,f as De,X as Ke,i as yt,C as wt,g as ze,E as Ct}from"../chunks/DoIa2EBd.js";import{D as $t,a as St,b as Tt,c as Pt,S as Ve,d as Dt,e as Rt,r as Re,G as Bt,P as Nt}from"../chunks/DoRLuQD_.js";import{G as At,R as tt,T as Lt,L as Fe,D as at,a as It,C as Et,b as jt,c as rt,F as zt,d as Ft,B as Mt,e as Gt,P as qt,f as Ot}from"../chunks/D9KZdREf.js";import{g as Ut}from"../chunks/DA1HxvQ5.js";import"../chunks/CtOyDHNH.js";function Jt(U,e){const u=Me(e,["children","$$slots","$$events","$$legacy"]);const f=[["circle",{cx:"12",cy:"12",r:"10"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16"}]];qe(U,Ge({name:"circle-alert"},()=>u,{get iconNode(){return f},children:(g,_)=>{var p=Y(),y=x(p);Oe(y,e,"default",{}),n(g,p)},$$slots:{default:!0}}))}function We(U,e){const u=Me(e,["children","$$slots","$$events","$$legacy"]);const f=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m9 12 2 2 4-4"}]];qe(U,Ge({name:"circle-check"},()=>u,{get iconNode(){return f},children:(g,_)=>{var p=Y(),y=x(p);Oe(y,e,"default",{}),n(g,p)},$$slots:{default:!0}}))}function Ye(U,e){const u=Me(e,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z"}],["path",{d:"M20 2v4"}],["path",{d:"M22 4h-4"}],["circle",{cx:"4",cy:"20",r:"2"}]];qe(U,Ge({name:"sparkles"},()=>u,{get iconNode(){return f},children:(g,_)=>{var p=Y(),y=x(p);Oe(y,e,"default",{}),n(g,p)},$$slots:{default:!0}}))}const Ht=["pending","running","review","merged","closed","failed"];class Qt{#e=Q(et([]));get tasks(){return t(this.#e)}set tasks(e){d(this.#e,e,!0)}#t=Q(!1);get loading(){return t(this.#t)}set loading(e){d(this.#t,e,!0)}#a=Q(null);get error(){return t(this.#a)}set error(e){d(this.#a,e,!0)}get tasksByStatus(){const e={pending:[],running:[],review:[],merged:[],closed:[],failed:[]};for(const u of this.tasks)e[u.status]&&e[u.status].push(u);return e}get statuses(){return Ht}setTasks(e){this.tasks=e}addTask(e){this.tasks=[...this.tasks,e]}updateTask(e){const u=this.tasks.findIndex(f=>f.id===e.id);u>=0?(e.logs==null&&(e={...e,logs:this.tasks[u].logs}),this.tasks[u]=e):this.tasks=[...this.tasks,e]}clear(){this.tasks=[],this.error=null}}const $=new Qt;var Xt=v('<span class="inline-flex items-center gap-1 text-[11px] font-semibold text-green-700 dark:text-green-300 bg-green-500/15 px-2 py-0.5 rounded-full border border-green-500/20 shrink-0"><!> Merged</span>'),Kt=v('<span class="inline-flex items-center gap-1 text-[11px] font-semibold text-gray-600 dark:text-gray-300 bg-gray-500/15 px-2 py-0.5 rounded-full border border-gray-500/20 shrink-0"><!> Closed</span>'),Vt=v('<span class="text-[10px] text-amber-600 dark:text-amber-400 flex items-center gap-0.5"><!> </span>'),Wt=v('<span class="text-[10px] text-red-600 dark:text-red-400 flex items-center gap-0.5"><!></span>'),Yt=v('<span class="text-[10px] text-muted-foreground flex items-center gap-0.5" title="Has dependencies"><!> </span>'),Zt=v('<span class="text-[10px] text-muted-foreground flex items-center gap-0.5"><!> </span>'),ea=v('<a class="inline-flex items-center gap-1 text-xs text-primary hover:underline mt-2" target="_blank" rel="noopener noreferrer"><!> </a>'),ta=v('<div class="flex items-start justify-between gap-2"><p class="font-medium text-sm line-clamp-2 flex-1"> </p> <!></div> <div class="flex items-center gap-2 mt-2 flex-wrap"><span class="text-[10px] text-muted-foreground font-mono bg-muted px-1.5 py-0.5 rounded"> </span> <!> <!> <!> <!></div> <!>',1);function aa(U,e){Ne(e,!0);function u(){Ut(`/tasks/${e.task.id}`)}function f(z){z.stopPropagation()}const g=ne(()=>e.task.depends_on&&e.task.depends_on.length>0),_=ne(()=>ht(e.task.description));var p=Y(),y=x(p);se(y,()=>Et,(z,V)=>{V(z,{class:"group p-3 cursor-pointer bg-card shadow-sm hover:bg-accent/50 hover:border-accent transition-all duration-200 hover:shadow-md",onclick:u,role:"button",tabindex:"0",children:(J,ie)=>{var Z=ta(),W=x(Z),ae=r(W),de=r(ae,!0);a(ae);var S=s(ae,2);{var E=c=>{var o=Xt(),h=r(o);At(h,{class:"w-3 h-3"}),B(),a(o),n(c,o)},T=c=>{var o=Y(),h=x(o);{var N=M=>{var ge=Kt(),w=r(ge);jt(w,{class:"w-3 h-3"}),B(),a(ge),n(M,ge)},ee=M=>{rt(M,{class:"w-4 h-4 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0 mt-0.5"})};k(h,M=>{e.task.status==="closed"?M(N):M(ee,!1)},!0)}n(c,o)};k(S,c=>{e.task.status==="merged"?c(E):c(T,!1)})}a(W);var l=s(W,2),m=r(l),H=r(m,!0);a(m);var F=s(m,2);{var ce=c=>{var o=Vt(),h=r(o);tt(h,{class:"w-3 h-3"});var N=s(h);a(o),I(()=>{Pe(o,"title",`Retry attempt ${e.task.attempt??""} of ${e.task.max_attempts??""}`),L(N,` #${e.task.attempt??""}`)}),n(c,o)};k(F,c=>{e.task.attempt>1&&c(ce)})}var ve=s(F,2);{var be=c=>{var o=Wt(),h=r(o);Lt(h,{class:"w-3 h-3"}),a(o),I(()=>Pe(o,"title",`${e.task.consecutive_failures??""} consecutive failures`)),n(c,o)};k(ve,c=>{e.task.consecutive_failures>=2&&c(be)})}var pe=s(ve,2);{var ke=c=>{var o=Yt(),h=r(o);Fe(h,{class:"w-3 h-3"});var N=s(h);a(o),I(()=>L(N,` ${e.task.depends_on?.length??""}`)),n(c,o)};k(pe,c=>{t(g)&&c(ke)})}var ue=s(pe,2);{var me=c=>{var o=Zt(),h=r(o);at(h,{class:"w-3 h-3"});var N=s(h);a(o),I((ee,M)=>{Pe(o,"title",`Cost: $${ee??""}`),L(N,` ${M??""}`)},[()=>e.task.cost_usd.toFixed(2),()=>e.task.cost_usd.toFixed(2)]),n(c,o)};k(ue,c=>{e.task.cost_usd>0&&c(me)})}a(l);var fe=s(l,2);{var oe=c=>{var o=ea();o.__click=f;var h=r(o);It(h,{class:"w-3 h-3"});var N=s(h);a(o),I(()=>{Pe(o,"href",e.task.pull_request_url),L(N,` PR #${e.task.pr_number??""}`)}),n(c,o)};k(fe,c=>{e.task.pull_request_url&&c(oe)})}I(()=>{L(de,t(_)),L(H,e.task.id)}),n(J,Z)},$$slots:{default:!0}})}),n(U,p),Ae()}Ze(["click"]);var ra=v('<div class="flex flex-col items-center justify-center py-8 text-muted-foreground"><!> <p class="text-sm">No tasks</p></div>'),sa=v('<div class="rounded-xl border bg-muted/50 min-h-[200px] sm:min-h-[500px] flex flex-col overflow-hidden"><div><!> <span> </span> <div class="ml-auto flex items-center gap-1.5"><!> <span class="inline-flex items-center justify-center w-5 h-5 rounded-full bg-background text-xs font-medium"> </span></div></div> <div class="space-y-2 flex-1 overflow-y-auto p-2"><!> <!></div></div>');function $e(U,e){Ne(e,!0);var u=sa(),f=r(u),g=r(f);se(g,()=>e.icon,(S,E)=>{E(S,{get class(){return`w-4 h-4 ${e.iconClass??""}`}})});var _=s(g,2),p=r(_,!0);a(_);var y=s(_,2),z=r(y);{var V=S=>{var E=Y(),T=x(E);bt(T,()=>e.headerAction),n(S,E)};k(z,S=>{e.headerAction&&S(V)})}var J=s(z,2),ie=r(J,!0);a(J),a(y),a(f);var Z=s(f,2),W=r(Z);je(W,17,()=>e.tasks,S=>S.id,(S,E)=>{aa(S,{get task(){return t(E)}})});var ae=s(W,2);{var de=S=>{var E=ra(),T=r(E);se(T,()=>e.icon,(l,m)=>{m(l,{class:"w-8 h-8 opacity-20 mb-2"})}),B(2),a(E),n(S,E)};k(ae,S=>{e.tasks.length===0&&S(de)})}a(Z),a(u),I(()=>{Qe(f,1,`flex items-center gap-2 px-3 py-2.5 ${e.headerBg??""} border-b`),Qe(_,1,`font-medium text-sm ${e.iconClass??""}`),L(p,e.label),L(ie,e.tasks.length)}),n(U,u),Ae()}var na=v('<div class="w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center"><!></div> Create New Task',1),oa=v("<!> <!>",1),la=v('<span class="font-mono text-xs truncate"> </span> <button type="button" class="ml-1 hover:bg-destructive/20 hover:text-destructive rounded p-0.5 transition-colors shrink-0"><!></button>',1),ia=v('<div class="flex flex-wrap gap-1.5 mb-3 max-h-20 overflow-y-auto"></div>'),da=v('<button type="button" class="w-full text-left px-3 py-2.5 hover:bg-accent cursor-pointer border-b last:border-b-0 transition-colors overflow-hidden"><div class="flex items-center gap-2"><span class="font-mono text-xs text-muted-foreground bg-background px-1.5 py-0.5 rounded shrink-0"> </span></div> <div class="text-sm line-clamp-2 mt-1"> </div></button>'),ca=v('<div class="p-4 text-sm text-muted-foreground text-center"><!> No matching tasks found</div>'),va=v('<div class="p-4 text-sm text-muted-foreground text-center"><!> No tasks available as dependencies</div>'),ua=v('<div class="mt-3 space-y-4 pl-1"><div><label for="max-cost" class="text-sm font-medium mb-2 flex items-center gap-2"><!> Max Cost (USD) <span class="text-xs text-muted-foreground font-normal">(optional)</span></label> <input id="max-cost" type="number" step="0.01" min="0" class="w-full border rounded-lg p-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-shadow text-sm" placeholder="e.g., 5.00"/></div></div>'),fa=v('<div class="bg-destructive/10 text-destructive text-sm p-3 rounded-lg flex items-center gap-2"><!> </div>'),ga=v("<!> Creating...",1),pa=v("<!> Create Task",1),ma=v("<!> <!>",1),_a=v('<!> <form><div class="py-4 space-y-5"><div><label for="description" class="text-sm font-medium mb-2 flex items-center gap-2"><!> Description</label> <textarea id="description" class="w-full border rounded-lg p-3 min-h-[120px] bg-background text-foreground resize-none focus:outline-none focus:ring-2 focus:ring-ring transition-shadow" placeholder="e.g., Add a function that calculates the Fibonacci sequence and include unit tests..."></textarea></div> <div><label for="acceptance-criteria" class="text-sm font-medium mb-2 flex items-center gap-2"><!> Acceptance Criteria <span class="text-xs text-muted-foreground font-normal">(optional)</span></label> <textarea id="acceptance-criteria" class="w-full border rounded-lg p-3 min-h-[80px] bg-background text-foreground resize-none focus:outline-none focus:ring-2 focus:ring-ring transition-shadow text-sm" placeholder="e.g., All tests pass, No linting errors, Function handles edge cases..."></textarea></div> <div><label for="dep-search" class="text-sm font-medium mb-2 flex items-center gap-2"><!> Dependencies <span class="text-xs text-muted-foreground font-normal">(optional)</span></label> <!> <div class="relative"><!> <input id="dep-search" type="text" class="w-full border rounded-lg pl-9 pr-3 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-shadow" placeholder="Search tasks to add as dependency..." autocomplete="off"/></div> <div class="mt-2 border rounded-lg max-h-36 overflow-y-auto bg-muted/20"><!></div></div> <div><button type="button" class="flex items-center gap-1.5 text-sm text-muted-foreground hover:text-foreground transition-colors"><!> Advanced Options</button> <!></div> <!></div> <!></form>',1);function xa(U,e){Ne(e,!0);let u=xt(e,"open",15,!1),f=Q(""),g=Q(!1),_=Q(null),p=Q(et([])),y=Q(""),z=Q(""),V=Q(void 0),J=Q(!1);const ie=ne(()=>$.tasks.filter(T=>!["closed","failed"].includes(T.status)&&!t(p).includes(T.id)&&(t(y)===""||T.id.toLowerCase().includes(t(y).toLowerCase())||T.description.toLowerCase().includes(t(y).toLowerCase()))));async function Z(T){if(T.preventDefault(),!!t(f).trim()){d(g,!0),d(_,null);try{const l=Re.selectedRepoId;if(!l)throw new Error("No repository selected");await ze.createTaskInRepo(l,t(f),t(p).length>0?t(p):void 0,t(z)||void 0,t(V)),d(f,""),d(p,[],!0),d(z,""),d(V,void 0),d(J,!1),u(!1),e.onCreated()}catch(l){d(_,l.message,!0)}finally{d(g,!1)}}}function W(){u(!1),d(f,""),d(p,[],!0),d(z,""),d(V,void 0),d(J,!1),d(_,null),d(y,"")}function ae(T){d(p,[...t(p),T],!0),d(y,"")}function de(T){d(p,t(p).filter(l=>l!==T),!0)}var S=Y(),E=x(S);se(E,()=>Rt,(T,l)=>{l(T,{get open(){return u()},set open(m){u(m)},children:(m,H)=>{var F=Y(),ce=x(F);se(ce,()=>$t,(ve,be)=>{be(ve,{class:"sm:max-w-[540px]",children:(pe,ke)=>{var ue=_a(),me=x(ue);se(me,()=>St,(i,C)=>{C(i,{children:(q,j)=>{var O=oa(),b=x(O);se(b,()=>Tt,(R,te)=>{te(R,{class:"flex items-center gap-2",children:(K,le)=>{var xe=na(),Te=x(xe),Ie=r(Te);Ye(Ie,{class:"w-4 h-4 text-primary"}),a(Te),B(),n(K,xe)},$$slots:{default:!0}})});var P=s(b,2);se(P,()=>Pt,(R,te)=>{te(R,{children:(K,le)=>{B();var xe=Je("Describe the task you want the AI agent to complete. Be specific for best results.");n(K,xe)},$$slots:{default:!0}})}),n(q,O)},$$slots:{default:!0}})});var fe=s(me,2),oe=r(fe),c=r(oe),o=r(c),h=r(o);zt(h,{class:"w-4 h-4 text-muted-foreground"}),B(),a(o);var N=s(o,2);He(N),mt(N,!0),a(c);var ee=s(c,2),M=r(ee),ge=r(M);Ft(ge,{class:"w-4 h-4 text-muted-foreground"}),B(2),a(M);var w=s(M,2);He(w),a(ee);var D=s(ee,2),A=r(D),G=r(A);Fe(G,{class:"w-4 h-4 text-muted-foreground"}),B(2),a(A);var X=s(A,2);{var ye=i=>{var C=ia();je(C,21,()=>t(p),yt,(q,j)=>{Mt(q,{variant:"secondary",class:"gap-1 pl-2 pr-1 py-1 max-w-48",children:(O,b)=>{var P=la(),R=x(P),te=r(R,!0);a(R);var K=s(R,2);K.__click=()=>de(t(j));var le=r(K);Ke(le,{class:"w-3 h-3"}),a(K),I(()=>L(te,t(j))),n(O,P)},$$slots:{default:!0}})}),a(C),n(i,C)};k(X,i=>{t(p).length>0&&i(ye)})}var re=s(X,2),_e=r(re);Ve(_e,{class:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"});var we=s(_e,2);Xe(we),a(re);var Ue=s(re,2),st=r(Ue);{var nt=i=>{var C=Y(),q=x(C);je(q,17,()=>t(ie),j=>j.id,(j,O)=>{var b=da();b.__click=()=>ae(t(O).id);var P=r(b),R=r(P),te=r(R,!0);a(R),a(P);var K=s(P,2),le=r(K,!0);a(K),a(b),I(()=>{L(te,t(O).id),L(le,t(O).description)}),n(j,b)}),n(i,C)},ot=i=>{var C=Y(),q=x(C);{var j=b=>{var P=ca(),R=r(P);Ve(R,{class:"w-5 h-5 mx-auto mb-2 opacity-40"}),B(),a(P),n(b,P)},O=b=>{var P=va(),R=r(P);Fe(R,{class:"w-5 h-5 mx-auto mb-2 opacity-40"}),B(),a(P),n(b,P)};k(q,b=>{t(y)?b(j):b(O,!1)},!0)}n(i,C)};k(st,i=>{t(ie).length>0?i(nt):i(ot,!1)})}a(Ue),a(D);var Le=s(D,2),Se=r(Le);Se.__click=()=>d(J,!t(J));var lt=r(Se);{var it=i=>{wt(i,{class:"w-4 h-4"})},dt=i=>{rt(i,{class:"w-4 h-4"})};k(lt,i=>{t(J)?i(it):i(dt,!1)})}B(),a(Se);var ct=s(Se,2);{var vt=i=>{var C=ua(),q=r(C),j=r(q),O=r(j);at(O,{class:"w-4 h-4 text-muted-foreground"}),B(2),a(j);var b=s(j,2);Xe(b),a(q),a(C),I(()=>b.disabled=t(g)),De(b,()=>t(V),P=>d(V,P)),n(i,C)};k(ct,i=>{t(J)&&i(vt)})}a(Le);var ut=s(Le,2);{var ft=i=>{var C=fa(),q=r(C);Ke(q,{class:"w-4 h-4 flex-shrink-0"});var j=s(q);a(C),I(()=>L(j,` ${t(_)??""}`)),n(i,C)};k(ut,i=>{t(_)&&i(ft)})}a(oe);var gt=s(oe,2);se(gt,()=>Dt,(i,C)=>{C(i,{class:"gap-2",children:(q,j)=>{var O=ma(),b=x(O);Be(b,{type:"button",variant:"outline",onclick:W,get disabled(){return t(g)},children:(R,te)=>{B();var K=Je("Cancel");n(R,K)},$$slots:{default:!0}});var P=s(b,2);{let R=ne(()=>t(g)||!t(f).trim());Be(P,{type:"submit",get disabled(){return t(R)},class:"gap-2",children:(te,K)=>{var le=Y(),xe=x(le);{var Te=he=>{var Ce=ga(),Ee=x(Ce);kt(Ee,{class:"w-4 h-4 animate-spin"}),B(),n(he,Ce)},Ie=he=>{var Ce=pa(),Ee=x(Ce);Ye(Ee,{class:"w-4 h-4"}),B(),n(he,Ce)};k(xe,he=>{t(g)?he(Te):he(Ie,!1)})}n(te,le)},$$slots:{default:!0}})}n(q,O)},$$slots:{default:!0}})}),a(fe),I(()=>{N.disabled=t(g),w.disabled=t(g),we.disabled=t(g)}),pt("submit",fe,Z),De(N,()=>t(f),i=>d(f,i)),De(w,()=>t(z),i=>d(z,i)),De(we,()=>t(y),i=>d(y,i)),n(pe,ue)},$$slots:{default:!0}})}),n(m,F)},$$slots:{default:!0}})}),n(U,S),Ae()}Ze(["click"]);var ha=v("<!> New",1),ba=v('<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary/10 text-primary"> </span>'),ka=v('<div class="flex items-center gap-2"><span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary/10 text-primary"> </span> <!></div>'),ya=v('<div class="flex items-center gap-2 text-sm text-green-600 dark:text-green-400 bg-green-500/10 px-3 py-1.5 rounded-md"><!> <span> </span></div>'),wa=v('<!> <span class="hidden sm:inline"> </span>',1),Ca=v('<div class="bg-destructive/10 text-destructive p-4 rounded-lg mb-4 flex items-center gap-3 border border-destructive/20"><!> <span> </span></div>'),$a=v('<header class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 mb-4 sm:mb-6"><div><div class="flex items-center gap-3"><h1 class="text-xl sm:text-2xl font-bold">Dashboard</h1> <!></div> <p class="text-muted-foreground text-sm mt-1 hidden sm:block">Manage and monitor your AI-powered tasks</p></div> <div class="flex items-center gap-3"><!> <!></div></header> <!> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3 sm:gap-4 flex-1 min-h-0"><!> <!> <!> <!> <!></div>',1),Sa=v('<div class="flex-1 flex flex-col items-center justify-center text-center"><div class="w-16 h-16 rounded-2xl bg-muted flex items-center justify-center mb-4"><!></div> <h2 class="text-xl font-semibold mb-2">No repository selected</h2> <p class="text-muted-foreground text-sm max-w-md">Add a GitHub repository to get started. Tasks are scoped to individual repositories.</p></div>'),Ta=v('<div class="p-4 sm:p-6 h-full flex flex-col"><!></div> <!>',1);function Ea(U,e){Ne(e,!0);let u=Q(!1),f=Q(!1),g=Q(null),_=null;function p(l){if(_&&(_.close(),_=null),!l){$.setTasks([]),$.loading=!1;return}$.loading=!0;const m=new EventSource(ze.eventsURL(l));m.addEventListener("init",H=>{$.setTasks(JSON.parse(H.data)),$.loading=!1,$.error=null}),m.addEventListener("task_created",H=>{const F=JSON.parse(H.data);$.addTask(F.task)}),m.addEventListener("task_updated",H=>{const F=JSON.parse(H.data);$.updateTask(F.task)}),m.onerror=()=>{$.error="Connection lost. Reconnecting..."},_=m}_t(()=>{const l=Re.selectedRepoId;return p(l),()=>{_&&(_.close(),_=null)}});async function y(){const l=Re.selectedRepoId;if(l){d(f,!0),d(g,null);try{d(g,await ze.syncRepoTasks(l),!0),setTimeout(()=>{d(g,null)},3e3)}catch(m){$.error=m.message}finally{d(f,!1)}}}const z=ne(()=>$.tasks.length),V=ne(()=>$.tasks.filter(l=>["pending","running","review"].includes(l.status)).length),J=ne(()=>!!Re.selectedRepoId),ie=ne(()=>[...$.tasksByStatus.merged,...$.tasksByStatus.closed]);var Z=Ta(),W=x(Z),ae=r(W);{var de=l=>{const m=w=>{Be(w,{size:"sm",variant:"outline",onclick:()=>d(u,!0),class:"h-6 px-2 gap-1 text-xs",children:(D,A)=>{var G=ha(),X=x(G);Nt(X,{class:"w-3 h-3"}),B(),n(D,G)},$$slots:{default:!0}})};var H=$a(),F=x(H),ce=r(F),ve=r(ce),be=s(r(ve),2);{var pe=w=>{var D=ka(),A=r(D),G=r(A);a(A);var X=s(A,2);{var ye=re=>{var _e=ba(),we=r(_e);a(_e),I(()=>L(we,`${t(V)??""} active`)),n(re,_e)};k(X,re=>{t(V)>0&&re(ye)})}a(D),I(()=>L(G,`${t(z)??""} total`)),n(w,D)};k(be,w=>{t(z)>0&&w(pe)})}a(ve),B(2),a(ce);var ke=s(ce,2),ue=r(ke);{var me=w=>{var D=ya(),A=r(D);We(A,{class:"w-4 h-4"});var G=s(A,2),X=r(G);a(G),a(D),I(()=>L(X,`Synced ${t(g).synced??""} PRs, ${t(g).merged??""} merged`)),n(w,D)};k(ue,w=>{t(g)&&w(me)})}var fe=s(ue,2);Be(fe,{variant:"outline",onclick:y,get disabled(){return t(f)},class:"gap-2",children:(w,D)=>{var A=wa(),G=x(A);{let re=ne(()=>t(f)?"animate-spin":"");tt(G,{get class(){return`w-4 h-4 ${t(re)??""}`}})}var X=s(G,2),ye=r(X,!0);a(X),I(()=>L(ye,t(f)?"Syncing...":"Sync PRs")),n(w,A)},$$slots:{default:!0}}),a(ke),a(F);var oe=s(F,2);{var c=w=>{var D=Ca(),A=r(D);Jt(A,{class:"w-5 h-5 flex-shrink-0"});var G=s(A,2),X=r(G,!0);a(G),a(D),I(()=>L(X,$.error)),n(w,D)};k(oe,w=>{$.error&&w(c)})}var o=s(oe,2),h=r(o);$e(h,{label:"Pending",get icon(){return Gt},headerBg:"bg-amber-500/10",iconClass:"text-amber-600 dark:text-amber-400",get tasks(){return $.tasksByStatus.pending},get headerAction(){return m}});var N=s(h,2);$e(N,{label:"Running",get icon(){return qt},headerBg:"bg-blue-500/10",iconClass:"text-blue-600 dark:text-blue-400",get tasks(){return $.tasksByStatus.running}});var ee=s(N,2);$e(ee,{label:"In Review",get icon(){return Ct},headerBg:"bg-purple-500/10",iconClass:"text-purple-600 dark:text-purple-400",get tasks(){return $.tasksByStatus.review}});var M=s(ee,2);$e(M,{label:"Done",get icon(){return We},headerBg:"bg-green-500/10",iconClass:"text-green-600 dark:text-green-400",get tasks(){return t(ie)}});var ge=s(M,2);$e(ge,{label:"Failed",get icon(){return Ot},headerBg:"bg-red-500/10",iconClass:"text-red-600 dark:text-red-400",get tasks(){return $.tasksByStatus.failed}}),a(o),n(l,H)},S=l=>{var m=Sa(),H=r(m),F=r(H);Bt(F,{class:"w-8 h-8 text-muted-foreground"}),a(H),B(4),a(m),n(l,m)};k(ae,l=>{t(J)?l(de):l(S,!1)})}a(W);var E=s(W,2);{var T=l=>{xa(l,{onCreated:()=>{},get open(){return t(u)},set open(m){d(u,m,!0)}})};k(E,l=>{t(J)&&l(T)})}n(U,Z),Ae()}export{Ea as component};
