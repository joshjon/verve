import{c as ee,a as n,d as ot,s as F,f as c,t as pt,e as qt}from"../chunks/5eh-HYXe.js";import{f as R,p as Ue,k as a,l as t,s,g as e,t as G,af as h,j as qe,y as ie,x as V,a1 as mt,a as kt,m as o,ag as Ht,ah as Jt}from"../chunks/CZBXD-dv.js";import{l as Me,s as Ie,c as ve,i as C,p as Qt}from"../chunks/D-PYic6o.js";import{I as je,s as Ee,a as Se,T as Vt,D as yt,G as Ge,L as wt,r as Ae,e as Be,b as _t,c as Xt,d as Oe,f as Pe,B as Le,g as Fe,h as gt,X as at,i as Yt,j as rt,C as Kt,k as Wt,E as Zt}from"../chunks/DModcqSq.js";import{D as ea,a as ta,b as aa,c as ra,P as st,S as xt,d as sa,C as na,e as oa,t as I}from"../chunks/BkYXa35J.js";import{G as la,R as Ct,C as da,L as nt,a as ia,b as ca,S as bt,F as va,T as ua,B as fa,c as pa,P as ma,d as _a}from"../chunks/DPcuPgXf.js";import{g as ga}from"../chunks/io8mkaLN.js";import"../chunks/BTnbI-mA.js";function xa(U,r){const $=Me(r,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M4.929 4.929 19.07 19.071"}],["circle",{cx:"12",cy:"12",r:"10"}]];je(U,Ie({name:"ban"},()=>$,{get iconNode(){return p},children:(k,u)=>{var y=ee(),g=R(y);Ee(g,r,"default",{}),n(k,y)},$$slots:{default:!0}}))}function $t(U,r){const $=Me(r,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"m9 18 6-6-6-6"}]];je(U,Ie({name:"chevron-right"},()=>$,{get iconNode(){return p},children:(k,u)=>{var y=ee(),g=R(y);Ee(g,r,"default",{}),n(k,y)},$$slots:{default:!0}}))}function ba(U,r){const $=Me(r,["children","$$slots","$$events","$$legacy"]);const p=[["circle",{cx:"12",cy:"12",r:"10"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16"}]];je(U,Ie({name:"circle-alert"},()=>$,{get iconNode(){return p},children:(k,u)=>{var y=ee(),g=R(y);Ee(g,r,"default",{}),n(k,y)},$$slots:{default:!0}}))}function ht(U,r){const $=Me(r,["children","$$slots","$$events","$$legacy"]);const p=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m9 12 2 2 4-4"}]];je(U,Ie({name:"circle-check"},()=>$,{get iconNode(){return p},children:(k,u)=>{var y=ee(),g=R(y);Ee(g,r,"default",{}),n(k,y)},$$slots:{default:!0}}))}function ha(U,r){const $=Me(r,["children","$$slots","$$events","$$legacy"]);const p=[["path",{d:"M12 4v16"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2"}],["path",{d:"M9 20h6"}]];je(U,Ie({name:"type"},()=>$,{get iconNode(){return p},children:(k,u)=>{var y=ee(),g=R(y);Ee(g,r,"default",{}),n(k,y)},$$slots:{default:!0}}))}var ka=c('<span class="inline-flex items-center gap-1 text-[11px] font-semibold text-green-700 dark:text-green-300 bg-green-500/15 px-2 py-0.5 rounded-full border border-green-500/20 shrink-0"><!> Merged</span>'),ya=c('<span class="inline-flex items-center gap-1 text-[11px] font-semibold text-gray-600 dark:text-gray-300 bg-gray-500/15 px-2 py-0.5 rounded-full border border-gray-500/20 shrink-0"><!> Closed</span>'),wa=c('<span class="text-[10px] text-amber-600 dark:text-amber-400 flex items-center gap-0.5"><!> </span>'),Ca=c(`<span class="inline-flex items-center gap-0.5 text-[10px] font-medium text-orange-600 dark:text-orange-400 bg-orange-500/10 px-1.5 py-0.5 rounded-full border border-orange-500/20" title="Not ready — this task won't be picked up by agents until marked as ready"><!> Not Ready</span>`),$a=c('<span class="text-[10px] text-red-600 dark:text-red-400 flex items-center gap-0.5"><!></span>'),Pa=c('<span class="text-[10px] text-muted-foreground flex items-center gap-0.5" title="Has dependencies"><!> </span>'),Sa=c('<span class="text-[10px] text-muted-foreground flex items-center gap-0.5"><!> </span>'),Ra=c('<span class="inline-flex items-center gap-0.5 text-[10px] font-medium text-cyan-600 dark:text-cyan-400 bg-cyan-500/10 px-1.5 py-0.5 rounded-full border border-cyan-500/20" title="Branch only — no PR created yet"><!> Branch only</span>'),Da=c('<span class="inline-flex items-center gap-1 text-[10px] text-blue-500"><!> Updating</span>'),Ta=c('<div class="flex items-center gap-2 mt-2"><a class="inline-flex items-center gap-1 text-xs text-primary hover:underline" target="_blank" rel="noopener noreferrer"><!> </a> <!></div>'),Na=c('<a class="inline-flex items-center gap-1 text-xs text-primary hover:underline mt-2 max-w-full" target="_blank" rel="noopener noreferrer"><!> <span class="truncate"> </span></a>'),Ba=c('<div class="flex items-start justify-between gap-2"><p class="font-medium text-sm line-clamp-2 flex-1"> </p> <!></div> <div class="flex items-center gap-2 mt-2 flex-wrap"><span class="text-[10px] text-muted-foreground font-mono bg-muted px-1.5 py-0.5 rounded"> </span> <!> <!> <!> <!> <!> <!></div> <!>',1);function Aa(U,r){Ue(r,!0);function $(){ga(`/tasks/${r.task.id}`)}function p(B){B.stopPropagation()}const k=ie(()=>r.task.depends_on&&r.task.depends_on.length>0),u=ie(()=>{if(!r.task.branch_name)return null;const B=Ae.repos.find(j=>j.id===r.task.repo_id);return B?`https://github.com/${B.full_name}/tree/${r.task.branch_name}`:null});var y=ee(),g=R(y);ve(g,()=>ca,(B,j)=>{j(B,{class:"group p-3 cursor-pointer bg-[oklch(0.18_0.005_285.823)] shadow-sm hover:bg-accent/50 hover:border-accent transition-all duration-200 hover:shadow-md",onclick:$,role:"button",tabindex:0,children:(te,le)=>{var K=Ba(),q=R(K),ae=a(q),ce=a(ae,!0);t(ae);var E=s(ae,2);{var H=i=>{var l=ka(),_=a(l);la(_,{class:"w-3 h-3"}),h(),t(l),n(i,l)},de=i=>{var l=ee(),_=R(l);{var f=v=>{var D=ya(),A=a(D);xa(A,{class:"w-3 h-3"}),h(),t(D),n(v,D)},m=v=>{$t(v,{class:"w-4 h-4 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0 mt-0.5"})};C(_,v=>{r.task.status==="closed"?v(f):v(m,!1)},!0)}n(i,l)};C(E,i=>{r.task.status==="merged"?i(H):i(de,!1)})}t(q);var x=s(q,2),N=a(x),X=a(N,!0);t(N);var W=s(N,2);{var me=i=>{var l=wa(),_=a(l);Ct(_,{class:"w-3 h-3"});var f=s(_);t(l),G(()=>{Se(l,"title",`Retry attempt ${r.task.attempt??""} of ${r.task.max_attempts??""}`),F(f,` #${r.task.attempt??""}`)}),n(i,l)};C(W,i=>{r.task.attempt>1&&i(me)})}var _e=s(W,2);{var Re=i=>{var l=Ca(),_=a(l);da(_,{class:"w-3 h-3"}),h(),t(l),n(i,l)};C(_e,i=>{!r.task.ready&&r.task.status==="pending"&&i(Re)})}var ge=s(_e,2);{var ke=i=>{var l=$a(),_=a(l);Vt(_,{class:"w-3 h-3"}),t(l),G(()=>Se(l,"title",`${r.task.consecutive_failures??""} consecutive failures`)),n(i,l)};C(ge,i=>{r.task.consecutive_failures>=2&&i(ke)})}var P=s(ge,2);{var Y=i=>{var l=Pa(),_=a(l);nt(_,{class:"w-3 h-3"});var f=s(_);t(l),G(()=>F(f,` ${r.task.depends_on?.length??""}`)),n(i,l)};C(P,i=>{e(k)&&i(Y)})}var J=s(P,2);{var ue=i=>{var l=Sa(),_=a(l);yt(_,{class:"w-3 h-3"});var f=s(_);t(l),G((m,v)=>{Se(l,"title",`Cost: $${m??""}`),F(f,` ${v??""}`)},[()=>r.task.cost_usd.toFixed(2),()=>r.task.cost_usd.toFixed(2)]),n(i,l)};C(J,i=>{r.task.cost_usd>0&&i(ue)})}var xe=s(J,2);{var De=i=>{var l=Ra(),_=a(l);Ge(_,{class:"w-3 h-3"}),h(),t(l),n(i,l)};C(xe,i=>{r.task.branch_name&&!r.task.pull_request_url&&i(De)})}t(x);var ye=s(x,2);{var we=i=>{var l=Ta(),_=a(l);_.__click=p;var f=a(_);ia(f,{class:"w-3 h-3"});var m=s(f);t(_);var v=s(_,2);{var D=A=>{var ne=Da(),Z=a(ne);wt(Z,{class:"w-3 h-3 animate-spin"}),h(),t(ne),n(A,ne)};C(v,A=>{(r.task.status==="running"||r.task.status==="pending")&&A(D)})}t(l),G(()=>{Se(_,"href",r.task.pull_request_url),F(m,` PR #${r.task.pr_number??""}`)}),n(i,l)},Ce=i=>{var l=ee(),_=R(l);{var f=m=>{var v=Na();v.__click=p;var D=a(v);Ge(D,{class:"w-3 h-3 shrink-0"});var A=s(D,2),ne=a(A,!0);t(A),t(v),G(()=>{Se(v,"href",e(u)??"#"),F(ne,r.task.branch_name)}),n(m,v)};C(_,m=>{r.task.branch_name&&m(f)},!0)}n(i,l)};C(ye,i=>{r.task.pull_request_url?i(we):i(Ce,!1)})}G(()=>{F(ce,r.task.title||r.task.description),F(X,r.task.id)}),n(te,K)},$$slots:{default:!0}})}),n(U,y),qe()}ot(["click"]);var La=c('<div class="flex flex-col items-center justify-center py-3 sm:py-8 text-muted-foreground"><!> <p class="text-sm">No tasks</p></div>'),Ma=c('<div class="rounded-xl border bg-muted/45 flex flex-col overflow-hidden"><div><!> <span> </span> <div class="ml-auto flex items-center gap-1.5"><!> <span class="inline-flex items-center justify-center w-5 h-5 rounded-full bg-background text-xs font-medium"> </span></div></div> <div class="space-y-2 sm:flex-1 overflow-y-auto p-2"><!> <!></div></div>');function Ne(U,r){Ue(r,!0);var $=Ma(),p=a($),k=a(p);ve(k,()=>r.icon,(E,H)=>{H(E,{get class(){return`w-4 h-4 ${r.iconClass??""}`}})});var u=s(k,2),y=a(u,!0);t(u);var g=s(u,2),B=a(g);{var j=E=>{var H=ee(),de=R(H);Xt(de,()=>r.headerAction),n(E,H)};C(B,E=>{r.headerAction&&E(j)})}var te=s(B,2),le=a(te,!0);t(te),t(g),t(p);var K=s(p,2),q=a(K);Be(q,17,()=>r.tasks,E=>E.id,(E,H)=>{Aa(E,{get task(){return e(H)}})});var ae=s(q,2);{var ce=E=>{var H=La(),de=a(H);ve(de,()=>r.icon,(x,N)=>{N(x,{class:"w-8 h-8 opacity-20 mb-2 hidden sm:block"})}),h(2),t(H),n(E,H)};C(ae,E=>{r.tasks.length===0&&E(ce)})}t(K),t($),G(()=>{_t(p,1,`flex items-center gap-2 px-3 py-2.5 ${r.headerBg??""} border-b`),_t(u,1,`font-medium text-sm ${r.iconClass??""}`),F(y,r.label),F(le,r.tasks.length)}),n(U,$),qe()}var Ia=c('<div class="w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center"><!></div> Create New Task',1),ja=c("<!> <!>",1),Ea=c('<div class="flex items-center gap-2"><span class="text-xs text-muted-foreground font-mono w-5 shrink-0 text-right"></span> <input type="text" class="flex-1 border rounded-lg px-3 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-shadow text-sm" placeholder="e.g., All tests pass"/> <button type="button" class="p-1.5 hover:bg-destructive/10 hover:text-destructive rounded transition-colors shrink-0"><!></button></div>'),za=c('<div class="space-y-2 mb-2"></div>'),Fa=c("<!> Add criterion",1),Ga=c('<span class="font-mono text-xs truncate"> </span> <button type="button" class="ml-1 hover:bg-destructive/20 hover:text-destructive rounded p-0.5 transition-colors shrink-0"><!></button>',1),Oa=c('<div class="flex flex-wrap gap-1.5 mb-3 max-h-20 overflow-y-auto"></div>'),Ua=c('<button type="button" class="w-full text-left px-3 py-2.5 hover:bg-accent cursor-pointer border-b last:border-b-0 transition-colors overflow-hidden"><div class="flex items-center gap-2"><span class="font-mono text-xs text-muted-foreground bg-background px-1.5 py-0.5 rounded shrink-0"> </span></div> <div class="text-sm line-clamp-2 mt-1"> </div></button>'),qa=c('<div class="p-4 text-sm text-muted-foreground text-center"><!> No matching tasks found</div>'),Ha=c('<div class="p-4 text-sm text-muted-foreground text-center"><!> No tasks available as dependencies</div>'),Ja=c("<option> </option>"),Qa=c('<div class="mt-3 space-y-4 pl-1"><div><label for="model-select" class="text-sm font-medium mb-2 flex items-center gap-2"><!> Model</label> <select id="model-select" class="w-full border rounded-lg p-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-shadow text-sm"></select></div> <div><label for="max-cost" class="text-sm font-medium mb-2 flex items-center gap-2"><!> Max Cost (USD) <span class="text-xs text-muted-foreground font-normal">(optional)</span></label> <input id="max-cost" type="number" step="0.01" min="0" class="w-full border rounded-lg p-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-shadow text-sm" placeholder="e.g., 5.00"/></div> <label for="skip-pr" class="flex items-center gap-3 p-3 rounded-lg border cursor-pointer hover:bg-accent/50 transition-colors"><input id="skip-pr" type="checkbox" class="w-4 h-4 rounded border-input accent-primary"/> <div class="flex-1"><div class="text-sm font-medium flex items-center gap-1.5"><!> Push to branch only</div> <p class="text-xs text-muted-foreground mt-0.5">Skip PR creation. You can create the PR manually and it will be detected on sync.</p></div></label></div>'),Va=c('<div class="bg-destructive/10 text-destructive text-sm p-3 rounded-lg flex items-center gap-2"><!> </div>'),Xa=c("<!> Creating...",1),Ya=c("<!> Create Task",1),Ka=c('<div class="flex justify-end gap-2 w-full"><!> <!></div>'),Wa=c('<!> <form><div class="py-4 space-y-7"><div class="space-y-3"><div><label for="title" class="text-sm font-medium mb-2 flex items-center gap-2"><!> Title</label> <input id="title" type="text" class="w-full border rounded-lg p-3 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-shadow" placeholder="e.g., Add Fibonacci function with unit tests"/> <p class="text-xs text-muted-foreground mt-1 text-right"> </p> <label for="not-ready" class="flex items-start gap-2 cursor-pointer mt-2 mb-1"><input id="not-ready" type="checkbox" class="w-3.5 h-3.5 rounded border-input accent-primary mt-0.5"/> <div><span class="text-sm">Mark as not ready</span> <span class="block text-xs text-muted-foreground">Agent will not receive task until marked as ready</span></div></label></div> <div><label for="description" class="text-sm font-medium mb-2 flex items-center gap-2"><!> Description <span class="text-xs text-muted-foreground font-normal">(optional)</span></label> <textarea id="description" class="w-full border rounded-lg p-3 min-h-[120px] bg-background text-foreground resize-none focus:outline-none focus:ring-2 focus:ring-ring transition-shadow" placeholder="Detailed description of what needs to be done..."></textarea></div></div> <hr class="border-border"/> <div><label class="text-sm font-medium mb-2 flex items-center gap-2"><!> Acceptance Criteria <span class="text-xs text-muted-foreground font-normal">(optional)</span></label> <!> <!></div> <hr class="border-border"/> <div><label for="dep-search" class="text-sm font-medium mb-2 flex items-center gap-2"><!> Dependencies <span class="text-xs text-muted-foreground font-normal">(optional)</span></label> <!> <div class="relative"><!> <input id="dep-search" type="text" class="w-full border rounded-lg pl-9 pr-3 py-2 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-shadow" placeholder="Search tasks to add as dependency..." autocomplete="off"/></div> <div class="mt-2 border rounded-lg max-h-36 overflow-y-auto bg-muted/20"><!></div></div> <div><button type="button" class="flex items-center gap-1.5 text-sm text-muted-foreground hover:text-foreground transition-colors"><!> Advanced Options</button> <!></div> <!></div> <!></form>',1);function Za(U,r){Ue(r,!0);let $=Qt(r,"open",15,!1),p=V(""),k=V(""),u=V(!1),y=V(null),g=V(mt([])),B=V(""),j=V(mt([])),te=V(void 0),le=V(!1),K=V(!1),q=V(!1),ae=V(""),ce=V("sonnet");kt(()=>{$()&&Oe.getDefaultModel().then(P=>{o(ce,P.model,!0)}).catch(()=>{})});const E=[{value:"",label:"Default"},{value:"haiku",label:"Haiku"},{value:"sonnet",label:"Sonnet"},{value:"opus",label:"Opus"}],H=ie(()=>E.find(P=>P.value===e(ce))?.label||e(ce)),de=ie(()=>I.tasks.filter(P=>!["closed","failed"].includes(P.status)&&!e(g).includes(P.id)&&(e(B)===""||P.id.toLowerCase().includes(e(B).toLowerCase())||P.description.toLowerCase().includes(e(B).toLowerCase()))));async function x(P){if(P.preventDefault(),!!e(p).trim()){o(u,!0),o(y,null);try{const Y=Ae.selectedRepoId;if(!Y)throw new Error("No repository selected");const J=e(j).filter(ue=>ue.trim()!=="");await Oe.createTaskInRepo(Y,e(p),e(k),e(g).length>0?e(g):void 0,J.length>0?J:void 0,e(te),e(le)||void 0,e(ae)||void 0,e(K)||void 0),o(p,""),o(k,""),o(g,[],!0),o(j,[],!0),o(te,void 0),o(le,!1),o(K,!1),o(ae,""),o(q,!1),$(!1),r.onCreated()}catch(Y){o(y,Y.message,!0)}finally{o(u,!1)}}}function N(){$(!1),o(p,""),o(k,""),o(g,[],!0),o(j,[],!0),o(te,void 0),o(le,!1),o(K,!1),o(ae,""),o(q,!1),o(y,null),o(B,"")}function X(P){o(g,[...e(g),P],!0),o(B,"")}function W(P){o(g,e(g).filter(Y=>Y!==P),!0)}function me(){o(j,[...e(j),""],!0)}function _e(P){o(j,e(j).filter((Y,J)=>J!==P),!0)}function Re(P,Y){o(j,e(j).map((J,ue)=>ue===P?Y:J),!0)}var ge=ee(),ke=R(ge);ve(ke,()=>oa,(P,Y)=>{Y(P,{get open(){return $()},set open(J){$(J)},children:(J,ue)=>{var xe=ee(),De=R(xe);ve(De,()=>ea,(ye,we)=>{we(ye,{class:"sm:max-w-[750px] max-h-[90vh] overflow-y-auto",children:(Ce,i)=>{var l=Wa(),_=R(l);ve(_,()=>ta,(d,S)=>{S(d,{children:(L,z)=>{var M=ja(),w=R(M);ve(w,()=>aa,(b,Q)=>{Q(b,{class:"flex items-center gap-2",children:(O,re)=>{var oe=Ia(),he=R(oe),$e=a(he);bt($e,{class:"w-4 h-4 text-primary"}),t(he),h(),n(O,oe)},$$slots:{default:!0}})});var T=s(w,2);ve(T,()=>ra,(b,Q)=>{Q(b,{children:(O,re)=>{h();var oe=pt("Describe the task you want the AI agent to complete. Be specific for best results.");n(O,oe)},$$slots:{default:!0}})}),n(L,M)},$$slots:{default:!0}})});var f=s(_,2),m=a(f),v=a(m),D=a(v),A=a(D),ne=a(A);ha(ne,{class:"w-4 h-4 text-muted-foreground"}),h(),t(A);var Z=s(A,2);Pe(Z),Ht(Z,!0),Se(Z,"maxlength",150);var be=s(Z,2),He=a(be);t(be);var lt=s(be,2),Je=a(lt);Pe(Je),h(2),t(lt),t(D);var dt=s(D,2),Qe=a(dt),Pt=a(Qe);va(Pt,{class:"w-4 h-4 text-muted-foreground"}),h(2),t(Qe);var Ve=s(Qe,2);Jt(Ve),t(dt),t(v);var Xe=s(v,4),Ye=a(Xe),St=a(Ye);ua(St,{class:"w-4 h-4 text-muted-foreground"}),h(2),t(Ye);var it=s(Ye,2);{var Rt=d=>{var S=za();Be(S,21,()=>e(j),rt,(L,z,M)=>{var w=Ea(),T=a(w);T.textContent=`${M+1}.`;var b=s(T,2);Pe(b),b.__input=re=>Re(M,re.target.value);var Q=s(b,2);Q.__click=()=>_e(M);var O=a(Q);at(O,{class:"w-3.5 h-3.5"}),t(Q),t(w),G(()=>{Yt(b,e(z)),b.disabled=e(u)}),n(L,w)}),t(S),n(d,S)};C(it,d=>{e(j).length>0&&d(Rt)})}var Dt=s(it,2);Le(Dt,{type:"button",variant:"outline",size:"sm",onclick:me,get disabled(){return e(u)},class:"gap-1.5 text-xs",children:(d,S)=>{var L=Fa(),z=R(L);st(z,{class:"w-3.5 h-3.5"}),h(),n(d,L)},$$slots:{default:!0}}),t(Xe);var Ke=s(Xe,4),We=a(Ke),Tt=a(We);nt(Tt,{class:"w-4 h-4 text-muted-foreground"}),h(2),t(We);var ct=s(We,2);{var Nt=d=>{var S=Oa();Be(S,21,()=>e(g),rt,(L,z)=>{fa(L,{variant:"secondary",class:"gap-1 pl-2 pr-1 py-1 max-w-48",children:(M,w)=>{var T=Ga(),b=R(T),Q=a(b,!0);t(b);var O=s(b,2);O.__click=()=>W(e(z));var re=a(O);at(re,{class:"w-3 h-3"}),t(O),G(()=>F(Q,e(z))),n(M,T)},$$slots:{default:!0}})}),t(S),n(d,S)};C(ct,d=>{e(g).length>0&&d(Nt)})}var Ze=s(ct,2),vt=a(Ze);xt(vt,{class:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"});var et=s(vt,2);Pe(et),t(Ze);var ut=s(Ze,2),Bt=a(ut);{var At=d=>{var S=ee(),L=R(S);Be(L,17,()=>e(de),z=>z.id,(z,M)=>{var w=Ua();w.__click=()=>X(e(M).id);var T=a(w),b=a(T),Q=a(b,!0);t(b),t(T);var O=s(T,2),re=a(O,!0);t(O),t(w),G(()=>{F(Q,e(M).id),F(re,e(M).title||e(M).description)}),n(z,w)}),n(d,S)},Lt=d=>{var S=ee(),L=R(S);{var z=w=>{var T=qa(),b=a(T);xt(b,{class:"w-5 h-5 mx-auto mb-2 opacity-40"}),h(),t(T),n(w,T)},M=w=>{var T=Ha(),b=a(T);nt(b,{class:"w-5 h-5 mx-auto mb-2 opacity-40"}),h(),t(T),n(w,T)};C(L,w=>{e(B)?w(z):w(M,!1)},!0)}n(d,S)};C(Bt,d=>{e(de).length>0?d(At):d(Lt,!1)})}t(ut),t(Ke);var tt=s(Ke,2),ze=a(tt);ze.__click=()=>o(q,!e(q));var Mt=a(ze);{var It=d=>{Kt(d,{class:"w-4 h-4"})},jt=d=>{$t(d,{class:"w-4 h-4"})};C(Mt,d=>{e(q)?d(It):d(jt,!1)})}h(),t(ze);var Et=s(ze,2);{var zt=d=>{var S=Qa(),L=a(S),z=a(L),M=a(z);na(M,{class:"w-4 h-4 text-muted-foreground"}),h(),t(z);var w=s(z,2);Be(w,21,()=>E,rt,(se,pe)=>{var Te=Ja(),Ut=a(Te);t(Te);var ft={};G(()=>{F(Ut,`${e(pe).label??""}${e(pe).value===""?` (${e(H)})`:""}`),ft!==(ft=e(pe).value)&&(Te.value=(Te.__value=e(pe).value)??"")}),n(se,Te)}),t(w),t(L);var T=s(L,2),b=a(T),Q=a(b);yt(Q,{class:"w-4 h-4 text-muted-foreground"}),h(2),t(b);var O=s(b,2);Pe(O),t(T);var re=s(T,2),oe=a(re);Pe(oe);var he=s(oe,2),$e=a(he),fe=a($e);Ge(fe,{class:"w-3.5 h-3.5 text-muted-foreground"}),h(),t($e),h(2),t(he),t(re),t(S),G(()=>{w.disabled=e(u),O.disabled=e(u),oe.disabled=e(u)}),Wt(w,()=>e(ae),se=>o(ae,se)),Fe(O,()=>e(te),se=>o(te,se)),gt(oe,()=>e(le),se=>o(le,se)),n(d,S)};C(Et,d=>{e(q)&&d(zt)})}t(tt);var Ft=s(tt,2);{var Gt=d=>{var S=Va(),L=a(S);at(L,{class:"w-4 h-4 flex-shrink-0"});var z=s(L);t(S),G(()=>F(z,` ${e(y)??""}`)),n(d,S)};C(Ft,d=>{e(y)&&d(Gt)})}t(m);var Ot=s(m,2);ve(Ot,()=>sa,(d,S)=>{S(d,{children:(L,z)=>{var M=Ka(),w=a(M);Le(w,{type:"button",variant:"outline",onclick:N,get disabled(){return e(u)},children:(b,Q)=>{h();var O=pt("Cancel");n(b,O)},$$slots:{default:!0}});var T=s(w,2);{let b=ie(()=>e(u)||!e(p).trim());Le(T,{type:"submit",get disabled(){return e(b)},class:"gap-2",children:(Q,O)=>{var re=ee(),oe=R(re);{var he=fe=>{var se=Xa(),pe=R(se);wt(pe,{class:"w-4 h-4 animate-spin"}),h(),n(fe,se)},$e=fe=>{var se=Ya(),pe=R(se);bt(pe,{class:"w-4 h-4"}),h(),n(fe,se)};C(oe,fe=>{e(u)?fe(he):fe($e,!1)})}n(Q,re)},$$slots:{default:!0}})}t(M),n(L,M)},$$slots:{default:!0}})}),t(f),G(()=>{Z.disabled=e(u),F(He,`${e(p).length??""}/150`),Je.disabled=e(u),Ve.disabled=e(u),et.disabled=e(u)}),qt("submit",f,x),Fe(Z,()=>e(p),d=>o(p,d)),gt(Je,()=>e(K),d=>o(K,d)),Fe(Ve,()=>e(k),d=>o(k,d)),Fe(et,()=>e(B),d=>o(B,d)),n(Ce,l)},$$slots:{default:!0}})}),n(J,xe)},$$slots:{default:!0}})}),n(U,ge),qe()}ot(["input","click"]);var er=c('<button class="h-6 px-2 gap-1 text-xs inline-flex items-center rounded-md font-medium bg-amber-500/20 text-amber-200 hover:bg-amber-500/30 transition-colors"><!> New</button>'),tr=c('<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary/15 text-primary"> </span>'),ar=c('<div class="flex items-center gap-2"><span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary/15 text-primary"> </span> <!></div>'),rr=c('<div class="flex items-center gap-2 text-sm text-green-600 dark:text-green-400 bg-green-500/10 px-3 py-1.5 rounded-md"><!> <span> </span></div>'),sr=c('<!> <span class="hidden sm:inline"> </span>',1),nr=c("<!> New Task",1),or=c('<div class="bg-destructive/10 text-destructive p-4 rounded-lg mb-4 flex items-center gap-3 border border-destructive/20"><!> <span> </span></div>'),lr=c('<header class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 mb-4 sm:mb-6"><div><div class="flex items-center gap-3"><h1 class="text-xl sm:text-2xl font-bold">Dashboard</h1> <!></div> <p class="text-muted-foreground text-sm mt-1 hidden sm:block">Manage and monitor your AI-powered tasks</p></div> <div class="flex items-center gap-3"><!> <!> <!></div></header> <!> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3 sm:gap-4 flex-1 min-h-0 sm:auto-rows-[1fr]"><!> <!> <!> <!> <!></div>',1),dr=c('<div class="flex-1 flex flex-col items-center justify-center text-center"><div class="w-16 h-16 rounded-2xl bg-muted flex items-center justify-center mb-4"><!></div> <h2 class="text-xl font-semibold mb-2">No repository selected</h2> <p class="text-muted-foreground text-sm max-w-md">Add a GitHub repository to get started. Tasks are scoped to individual repositories.</p></div>'),ir=c('<div class="p-4 sm:p-6 flex-1 min-h-0 flex flex-col"><!></div> <!>',1);function xr(U,r){Ue(r,!0);let $=V(!1),p=V(!1),k=V(null),u=null;function y(x){if(u&&(u.close(),u=null),!x){I.setTasks([]),I.loading=!1;return}I.loading=!0;const N=new EventSource(Oe.eventsURL(x));N.addEventListener("init",X=>{I.setTasks(JSON.parse(X.data)),I.loading=!1,I.error=null}),N.addEventListener("task_created",X=>{const W=JSON.parse(X.data);I.addTask(W.task)}),N.addEventListener("task_updated",X=>{const W=JSON.parse(X.data);I.updateTask(W.task)}),N.onerror=()=>{I.error="Connection lost. Reconnecting..."},u=N}kt(()=>{const x=Ae.selectedRepoId;return y(x),()=>{u&&(u.close(),u=null)}});async function g(){const x=Ae.selectedRepoId;if(x){o(p,!0),o(k,null);try{o(k,await Oe.syncRepoTasks(x),!0),setTimeout(()=>{o(k,null)},3e3)}catch(N){I.error=N.message}finally{o(p,!1)}}}const B=ie(()=>I.tasks.length),j=ie(()=>I.tasks.filter(x=>["pending","running","review"].includes(x.status)).length),te=ie(()=>!!Ae.selectedRepoId),le=ie(()=>[...I.tasksByStatus.merged,...I.tasksByStatus.closed]);var K=ir(),q=R(K),ae=a(q);{var ce=x=>{const N=f=>{var m=er();m.__click=()=>o($,!0);var v=a(m);st(v,{class:"w-3 h-3"}),h(),t(m),n(f,m)};var X=lr(),W=R(X),me=a(W),_e=a(me),Re=s(a(_e),2);{var ge=f=>{var m=ar(),v=a(m),D=a(v);t(v);var A=s(v,2);{var ne=Z=>{var be=tr(),He=a(be);t(be),G(()=>F(He,`${e(j)??""} active`)),n(Z,be)};C(A,Z=>{e(j)>0&&Z(ne)})}t(m),G(()=>F(D,`${e(B)??""} total`)),n(f,m)};C(Re,f=>{e(B)>0&&f(ge)})}t(_e),h(2),t(me);var ke=s(me,2),P=a(ke);{var Y=f=>{var m=rr(),v=a(m);ht(v,{class:"w-4 h-4"});var D=s(v,2),A=a(D);t(D),t(m),G(()=>F(A,`Synced ${e(k).synced??""} PRs, ${e(k).merged??""} merged`)),n(f,m)};C(P,f=>{e(k)&&f(Y)})}var J=s(P,2);Le(J,{variant:"outline",onclick:g,get disabled(){return e(p)},class:"gap-2",children:(f,m)=>{var v=sr(),D=R(v);{let Z=ie(()=>e(p)?"animate-spin":"");Ct(D,{get class(){return`w-4 h-4 ${e(Z)??""}`}})}var A=s(D,2),ne=a(A,!0);t(A),G(()=>F(ne,e(p)?"Syncing...":"Sync PRs")),n(f,v)},$$slots:{default:!0}});var ue=s(J,2);Le(ue,{onclick:()=>o($,!0),class:"gap-2",children:(f,m)=>{var v=nr(),D=R(v);st(D,{class:"w-4 h-4"}),h(),n(f,v)},$$slots:{default:!0}}),t(ke),t(W);var xe=s(W,2);{var De=f=>{var m=or(),v=a(m);ba(v,{class:"w-5 h-5 flex-shrink-0"});var D=s(v,2),A=a(D,!0);t(D),t(m),G(()=>F(A,I.error)),n(f,m)};C(xe,f=>{I.error&&f(De)})}var ye=s(xe,2),we=a(ye);Ne(we,{label:"Pending",get icon(){return pa},headerBg:"bg-amber-500/10",iconClass:"text-amber-600 dark:text-amber-400",get tasks(){return I.tasksByStatus.pending},get headerAction(){return N}});var Ce=s(we,2);Ne(Ce,{label:"Running",get icon(){return ma},headerBg:"bg-blue-500/10",iconClass:"text-blue-600 dark:text-blue-400",get tasks(){return I.tasksByStatus.running}});var i=s(Ce,2);Ne(i,{label:"In Review",get icon(){return Zt},headerBg:"bg-purple-500/10",iconClass:"text-purple-600 dark:text-purple-400",get tasks(){return I.tasksByStatus.review}});var l=s(i,2);Ne(l,{label:"Done",get icon(){return ht},headerBg:"bg-green-500/10",iconClass:"text-green-600 dark:text-green-400",get tasks(){return e(le)}});var _=s(l,2);Ne(_,{label:"Failed",get icon(){return _a},headerBg:"bg-red-500/10",iconClass:"text-red-600 dark:text-red-400",get tasks(){return I.tasksByStatus.failed}}),t(ye),n(x,X)},E=x=>{var N=dr(),X=a(N),W=a(X);Ge(W,{class:"w-8 h-8 text-muted-foreground"}),t(X),h(4),t(N),n(x,N)};C(ae,x=>{e(te)?x(ce):x(E,!1)})}t(q);var H=s(q,2);{var de=x=>{Za(x,{onCreated:()=>{},get open(){return e($)},set open(N){o($,N,!0)}})};C(H,x=>{e(te)&&x(de)})}n(U,K),qe()}ot(["click"]);export{xr as component};
