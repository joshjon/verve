# Verve Agent with Go support
# Build: docker build -f agent/examples/Dockerfile.golang -t verve-agent:golang ./agent
# Use:   AGENT_IMAGE=verve-agent:golang make run-worker

FROM verve-agent:latest

USER root

# Install Go - use apk on Wolfi, binary download on Debian
RUN if command -v apk > /dev/null; then \
        apk add --no-cache go; \
    else \
        curl -fsSL https://go.dev/dl/go1.22.0.linux-amd64.tar.gz | tar -C /usr/local -xzf -; \
    fi

ENV PATH="/usr/local/go/bin:${PATH}"

USER agent

# Set GOPATH for agent user
ENV GOPATH="/home/agent/go"
ENV PATH="${GOPATH}/bin:${PATH}"
